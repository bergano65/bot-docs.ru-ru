---
title: Тестирование и отладка ботов с помощью эмулятора Bot Framework | Документы Майкрософт
description: Сведения о проверке, тестировании и отладке ботов с помощью классического приложения "Эмулятор Bot Framework".
keywords: расшифровка, инструмент msbot, языковые службы, распознавание речи
author: DeniseMak
ms.author: v-demak
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.date: 11/13/2018
ms.openlocfilehash: f3a6a57a5fd01061493e5c216875f0c4210483f6
ms.sourcegitcommit: 8b7bdbcbb01054f6aeb80d4a65b29177b30e1c20
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2018
ms.locfileid: "51645614"
---
# <a name="debug-with-the-emulator"></a>Отладка ботов с помощью эмулятора

Эмулятор Bot Framework — это классическое приложение, которое позволяет разработчикам локально или удаленно тестировать и отлаживать боты. С помощью эмулятора вы можете общаться с ботом и проверять сообщения, которые он посылает и получает. Эмулятор отображает сообщения так, как они будут выглядеть в интерфейсе веб-чата, и регистрирует запросы и ответы JSON при обмене сообщениями с ботом. Перед развертыванием бота в облаке запустите его локально и протестируйте с помощью эмулятора. Вы можете протестировать бот с помощью эмулятора, даже если вы еще не [создали](./bot-service-quickstart.md) его в службе Azure Bot или не настроили для запуска во всех каналах.

## <a name="prerequisites"></a>Предварительные требования
- Установите [эмулятор](https://aka.ms/Emulator-wiki-getting-started).
- Установите программное обеспечение туннелирования [ngrok][ngrokDownload].

## <a name="connect-to-a-bot-running-on-localhost"></a>Подключение к боту, работающему на локальном узле

Чтобы подключиться к боту, работающему на локальном узле, щелкните **Open bot** (Открыть бот) и выберите BOT-файл. 

![Интерфейс эмулятора](media/emulator-v4/emulator-welcome.png)

## <a name="view-detailed-message-activity-with-the-inspector"></a>Просмотр действий с сообщениями с помощью инспектора

Отправьте боту сообщение и получите от него ответ. Можно щелкнуть сообщение в окне беседы, чтобы просмотреть необработанные действия JSON с помощью функции **Инспектор** в правой части окна. При выборе сообщение станет желтым, и объект действия JSON будет отображаться слева от окна чата. Данные JSON включают метаданные ключа, в том числе channelID, тип действия, идентификатор беседы, текстовое сообщение, URL-адрес конечной точки и т. д. Можно проверить действия, отправленные пользователем, а также действия, с помощью которых бот отвечает. 

![Действия с сообщениями эмулятора](media/emulator-v4/emulator-view-message-activity-02.png)

## <a name="save-and-load-conversations-with-bot-transcripts"></a>Сохранение и загрузка бесед с расшифровками бота

Действия в эмуляторе можно сохранить в качестве расшифровок. В открытом окне интерактивного чата выберите **Save Transcript As** (Сохранить расшифровку как) для файла расшифровки. Нажав кнопку **Начать сначала**, можно в любое время очистить беседу и перезапустить подключение к боту.  

![Эмулятор сохраняет расшифровки](media/emulator-v4/emulator-live-chat.png)

Чтобы загрузить расшифровки, последовательно выберите **Файл > Open Tranascript File (Открыть файл расшифровки)**, а затем выберите расшифровку. Откроется новое окно расшифровки, и в окне вывода отобразятся действия с сообщениями. 

![Эмулятор загружает расшифровки](media/emulator-v4/emulator-load-transcript.png)

## <a name="add-services"></a>Добавление служб 

Приложение LUIS, базу знаний QnA или модель диспетчеризации можно зарегистрировать в BOT-файле напрямую из эмулятора. После загрузки BOT-файла нажмите кнопку "Службы" в левой части окна эмулятора. Вы увидите параметры для добавления LUIS, QnA Maker и средства Dispatch в меню **Службы**. 

Чтобы добавить приложение службы, просто щелкните кнопку **+** и выберите службу, которую хотите добавить. Вам будет предложено войти на портал Azure, чтобы добавить службу в BOT-файл и подключить ее к приложению бота. 

![Подключение к LUIS](media/emulator-v4/emulator-connect-luis-btn.png)

Подключив любую из этих служб, можно вернуться в окно чата в реальном времени и убедиться, что службы подключены и работают. 

![QnA подключен](media/emulator-v4/emulator-view-message-activity.png)

## <a name="inspect-services"></a>Проверка служб

С помощью эмулятора версии 4 вы также можете проверить ответы JSON от LUIS и QnA. Для бота с подключенными языковыми службами в окне журнала в нижнем правом углу можно выбрать **трассировку**. Этот новый инструмент также предоставляет компоненты для обновления языковых служб непосредственно из эмулятора. 

![Инспектор LUIS](media/emulator-v4/emulator-luis-inspector.png)

Если подключена служба LUIS, вы заметите, что в ссылке трассировки указана **трассировка Luis**. Выбрав ее, вы увидите необработанный ответ от службы LUIS, включающий намерения, сущности и соответствующие оценки. Также имеется возможность переназначить намерения для фраз пользователей. 

![Инспектор QnA](media/emulator-v4/emulator-qna-inspector.png)

Если подключена служба QnA, журнал отобразит **трассировку QnA**. Выбрав ее, можно выполнить предварительный просмотр пары "вопрос-ответ", связанной с этим действием, наряду с оценкой достоверности. Здесь можно добавить выражения альтернативных вопросов для ответа.

## <a name="configure-ngrok"></a>Настройка ngrok

Если вы используете Windows и эмулятор Bot Framework за брандмауэром или другой пограничной сетью и хотите подключаться к удаленному боту, необходимо установить и настроить программное обеспечение туннелирования **ngrok**. Эмулятор Bot Framework тесно интегрируется с программным обеспечением туннелирования ngrok (разработанным [inconshreveable][inconshreveable]) и при необходимости может запускать его автоматически.

Откройте **Emulator Settings** (Настройки эмулятора), введите путь к файлу ngrok, выберите, нужно ли обходить ngrok для локальных адресов, и нажмите кнопку **Сохранить**.

![Путь к файлу ngrok](media/emulator-v4/emulator-ngrok-path.png)

## <a name="additional-resources"></a>Дополнительные ресурсы

Эмулятор Bot Framework — это решение с открытым исходным кодом. Вы можете [принять участие][EmulatorGithubContribute] в разработке, [отправляя ошибки и предложения][EmulatorGithubBugs].



[EmulatorGithubContribute]: https://github.com/Microsoft/BotFramework-Emulator/wiki/How-to-Contribute
[EmulatorGithubBugs]: https://github.com/Microsoft/BotFramework-Emulator/wiki/Submitting-Bugs-%26-Suggestions

[ngrokDownload]: https://ngrok.com/
[inconshreveable]: https://inconshreveable.com/
