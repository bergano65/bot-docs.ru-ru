---
title: Шаблон ответов | Документация Майкрософт
description: Узнайте, как настроить шаблон ответов для ботов Conversation Designer.
author: vkannan
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
ROBOTS: NoIndex, NoFollow
ms.openlocfilehash: b09b7fa5f5672c121711deb2edcdc9718a79983f
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2018
ms.locfileid: "39306254"
---
# <a name="response-template-for-conversation-designer-bots"></a>Шаблон ответов для ботов Conversation Designer
> [!IMPORTANT]
> Conversation Designer пока доступен не для всех клиентов. Дополнительные сведения о доступности Conversation Designer будут опубликованы позже в этом году.

Генерация текста позволяет боту взаимодействовать с пользователем разнообразно и естественно благодаря разным ответным сообщениям. Этими сообщениями можно управлять с помощью шаблонов ответов в Conversation Designer.

Шаблоны ответов поддерживают многократное использование ответов и помогают обеспечить единый стиль речи и язык в ответах ботов. 

## <a name="create-response-templates"></a>Создание шаблонов ответов

В Conversation Designer можно создать шаблоны ответов, которые можно многократно использовать в любой ситуации, когда нужно отправить ответ пользователю. 

В шаблонах простых ответов определена одноразовая коллекция возможных произносимых или отображаемых высказываний. Эти шаблоны можно использовать для отображения ответов бота, состояний в командной строке или в адаптивных карточках, чтобы воссоздать полностью разрешенную строку.

Чтобы добавить шаблон простых ответов, сделайте следующее.
1. На панели слева щелкните **Add** (Добавить). Отобразится контекстное меню.
2. Щелкните **Simple response** (Простой ответ). На главной панели содержимого отобразится окно редактора.
3. В поле **Simple response name** (Имя простого ответа) введите имя этого шаблона простых ответов.
4. В поле **Bot's response to user** (Ответ бота пользователю) введите фразы (по одной за раз).
5. После завершения настройки простого ответа в правом верхнем углу щелкните **Save** (Сохранить). 

Например, можно создать шаблон фраз подтверждения (назовем его AckPhrase) со следующими репликами:

- ОК.
- Sure
- You bet
- I'd be happy to help
- Glad to help

С помощью шаблона среда выполнения общения случайным образом выбирает одну из этих строк, чтобы ответы бота звучали более естественно, а не скучно и однообразно.

## <a name="conditional-response-templates"></a>Шаблоны условных ответов

Шаблоны условных ответов содержат несколько ответов с условиями. Создаваемая вами функция обратного вызова помогает модулю генерации текста решить, какую строку ответа использовать, исходя из условия, которое вы указали. 

Например, время шаблон времени суток должен выдавать фразу "good morning" или "good evening" на основе фактического времени суток. 

Чтобы добавить шаблон ответов, сделайте следующее.
1. На панели слева щелкните **Add** (Добавить). Отобразится контекстное меню.
2. Щелкните **Conditional response** (Условный ответ). На главной панели содержимого отобразится окно редактора.
3. В поле **Conditional response name** (Имя условного ответа) введите имя этого шаблона.
4. В поле **Conditional response** (Условный ответ) введите фразы (по одной за раз). Например, для шаблона timeOfDayTemplate введите две возможные фразы, "Good morning" и "Good evening".
5. Для ответа "Good morning" в поле **Condition name** (Имя условия) введите morning. Аналогично, для ответа "Good evening" в поле **Condition name** (Имя условия) введите evening. Ваш пользовательский сценарий будет возвращать одно из этих условий.
6. В поле **Code to execute on run** (Код, выполняемый при запуске) введите имя функции обратного вызова (например: `fnResolveTimeOfDayTemplate`). Затем щелкните **View code** (Просмотреть код), чтобы загрузить редактор *Scripts** (Сценарии). В нем можно определить реализацию данной функции обратного вызова.
7. В правом верхнем углу щелкните **Save** (Сохранить), чтобы сохранить изменения и создать этот шаблон.

Пример кода функции обратного вызова *fnResolveTimeOfDayTemplate*. Эта функция будет возвращать строку, которая соответствует условию morning или evening (указанному в поле **Condition name** (Имя условия)), определенному ответом.

```javascript
module.exports.fnTimeOfDayTemplate = function(context) {
    var currentTime = new Date().getHours();
    if(currentTime >= 12) {
        return "evening!";
    } else {
        return "morning!";
    }
}
```

## <a name="send-a-response-to-user"></a>Отправка ответа пользователю

Чтобы отправить пользователю ответ, используя шаблоны ответов, заключите имена шаблонов в квадратные скобки. Например, чтобы использовать шаблон простых ответов AckPhrase для состояния отзывов, в поле **Bot's response to user** (Ответ бота пользователю) введите фразу `[AckPhrase], I will get that done for you right away`.

Если вы хотите использовать квадратные скобки в ответах, используйте "\" как escape-символ, чтобы указать среде выполнения общения пропускать разрешение квадратных скобок.

Если у вас есть определенные сущности, их также можно использовать в ответе для пользователя. Можно указать сущности для генерации текста, заключив их имена в фигурные скобки. Например, если в боте есть сущность `location`, ее можно указать в ответах следующим образом: `[AckPhrase], I can help you find a table at {location}.`.

## <a name="nesting-response-templates"></a>Вложение шаблонов ответов

Шаблоны ответов можно "вкладывать". Один шаблон ответов может содержать ссылки на другой шаблон ответов. Например, с помощью шаблона простых ответов `AckPhrase` и шаблона условных ответов `timeOfDayTemplate` можно создать шаблон ответов `timeBasedGreeting`, использующий первые два шаблона для получения окончательного ответа. 

> [!TIP]
> Хотя вложение шаблонов — это мощная функция, не забудьте убедиться в том, что вложенные шаблоны не образуют бесконечный цикл. То есть избегайте ситуаций, когда `AckPhrase` вызывает `timeOfDayTemplate`, а `timeOfDayTemplate`, в свою очередь, вызывает `AckPhrase`.

Например, создайте шаблон **простых ответов** `timeBasedGreeting` и введите следующий текст в поле **Bot's response to user** (Ответ бота пользователю) для этого шаблона: `[timeOfDayTemplate] [AckPhrase], ... `

## <a name="define-user-utterance-as-help-tips"></a>Определение высказывания пользователя в качестве совета

При определении **высказывания** пользователя его можно настроить в качестве **совета**. Чтобы настроить высказывание в качестве **совета**, щелкните `...` справа от высказывания и выберите **Use as help tip** (Использовать в качестве совета). 

Совет используется во встроенном шаблоне генерации текста `[builtin-tasktips]` везде, где пользователь определяет значение поля **Bot's response to user** (Ответ бота пользователю). Например, можно создать следующий ответ: `Sorry I did not understand that. Here are some things you can try - [builtin.tasktips]`

Если для задачи не определен **совет**, то `[builtin-tasktips]` отобразит пустую строку. Если для задачи определено несколько **советов**, то `[builtin-tasktips]` будет выбирать один из них в произвольном порядке каждый раз, когда выдается ответ.

## <a name="next-step"></a>Дальнейшие действия
> [!div class="nextstepaction"]
> [Адаптивные карточки](conversation-designer-adaptive-cards.md)
