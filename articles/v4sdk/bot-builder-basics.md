---
title: Основы создания Bot Builder | Документация Майкрософт
description: Базовая структура пакета SDK Bot Builder.
keywords: Включить контекст, структура бота, получение входных данных
author: ivorb
ms.author: v-ivorb
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 04/18/2018
monikerRange: azure-bot-service-4.0
ms.openlocfilehash: 48c32a1dd1c43bbb84c0f771be7dff691f0996ec
ms.sourcegitcommit: f95702d27abbd242c902eeb218d55a72df56ce56
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2018
ms.locfileid: "39306478"
---
# <a name="basic-bot-structure"></a>Базовая структура бота

[!INCLUDE [pre-release-label](~/includes/pre-release-label.md)]

Служба Azure Bot и пакет SDK для Bot Builder предоставляют библиотеки, примеры, средства для сборки и отладки ботов. Однако, прежде чем подробно рассматривать любой из этих компонентов, важно понять основную структуру бота и то, как все это работает вместе. Эти принципы не зависят от выбранного языка программирования и являются универсальными. В статье приведены ссылки на более глубокое содержание, а также платформу когнитивного запуска для работы бота.

Рассмотрим структуру бота с самого начала.

## <a name="creation-of-your-bot"></a>Создание бота

Бот может быть создан несколькими способами, например с помощью [портала Azure](~/bot-service-quickstart.md), в [Visual Studio](~/dotnet/bot-builder-dotnet-sdk-quickstart.md) или через средства командной строки в [JavaScript](~/javascript/bot-builder-javascript-quickstart.md), [Java](~/java/bot-builder-java-quickstart.md) или [Python](~/python/bot-builder-python-quickstart.md). После создания боты можно запустить на локальном компьютере в Azure или в другой облачной службе. Все они работают по сходному принципу, который не зависит от того, где они работают или как они построены.

## <a name="interaction-with-your-bot"></a>Взаимодействие с ботом

Бот не обладает обычным пользовательским интерфейсом в привычном понимании, а вместо этого взаимодействует с пользователем через [общение](~/v4sdk/bot-concepts.md#activities-and-conversations). В зависимости от приложения, используемого для подключения к боту (который именуется [каналом](~/v4sdk/bot-concepts.md), но данная формулировка здесь не используется), между ним и пользователем осуществляется обмен некоторой информацией.

В пределах бота каждая единица информации называется **действием**, которое может принимать различные формы. Действия включают в себя как обмен данными с пользователем, который называется **сообщениями**, так и дополнительную информацию, заключенную в несколько других [типов действий](~/bot-service-activities-entities.md). Эта дополнительная информация может включать сведения о присоединении или отключении третьей стороны к общению, об окончании общения и т. д. Такие типы данных из подключения пользователей отправляются базовой системой без необходимости предпринимать какие-либо действия.

Бот получает данные и заключает их в объект действия с правильным типом для дальнейшей передачи коду бота. Все другие типы действия предоставляют полезную информацию, однако наиболее интересным и наиболее распространенным типом действий является пользовательский тип **сообщение**.

Каждое действие, получаемое ботом, начинает свой виток, который будет описан далее.

## <a name="receiving-user-input"></a>Получение входных данных от пользователя

При получении от пользователя действия с сообщением необходимо получить общие сведения о нем. Наиболее простым способом является простое сопоставление текста входящего сообщения со строкой. В зависимости от того, какая это строка, можно выбрать предпринимаемое действие, которое будет зависеть от целей, поставленных боту. К ним можно отнести ответ пользователю, обновление некоторой переменной или ресурса, сохранение его в [хранилище](~/v4sdk/bot-builder-storage-concept.md) или аналогичную обработку.

Существуют более сложные способы распознавания входных данных, полученных от пользователя, например использование [LUIS](~/v4sdk/bot-builder-concept-luis.md) или [QnA Maker](~/v4sdk/bot-builder-howto-qna.md), но самым простым является сопоставление строк.

## <a name="defining-a-turn"></a>Определение включения

[!INCLUDE [Define a turn](~/includes/snippet-definition-turn.md)]

Обработка действий управляется **адаптером**. Дополнительные сведения об этом процессе можно узнать из статьи [Обработка действий](~/v4sdk/bot-builder-concept-activity-processing.md). Когда адаптер получает какое-либо действие, он создает **контекст включения**, который предоставляет информацию о действии и придает контекст обрабатываемому включению. Контекст включения существует на время включения, а затем удаляется, отмечая его конец.

В [контексте включения](~/v4sdk/bot-builder-concept-activity-processing.md#turn-context) содержится небольшое количество информации, которую бот использует на всех уровнях. Это полезно потому, что этот объект контекста включения может и должен использоваться для хранения информации, которая может потребоваться для включения в будущем.

> [!IMPORTANT]
> Все **включения** являются независимыми, выполняются сами по себе и обладают потенциалом перекрытия. За один раз бот может обработать несколько включений от разных пользователей, которые поступили по различным каналам. Каждое включение будет обладать собственным контекстом включения, но при этом стоит учитывать сложность, которая возникает в некоторых ситуациях.

## <a name="where-to-go-from-here"></a>Дальнейшие действия

В этой статье не высветлено много деталей, например [обработка действий](~/v4sdk/bot-builder-concept-activity-processing.md), различные [типы общения](~/v4sdk/bot-builder-conversations.md), отслеживание [состояния общения](~/v4sdk/bot-builder-storage-concept.md) при более интеллектуальных сеансах общения и т. д. Остальная часть концептуальных тем построена по основным принципам и охватывает остальную часть идей, необходимых для понимания ботов и службы Azure Bot. Чтобы получить дополнительные сведения, можно ознакомиться со следующими разделами, изучить [краткое руководство](~/bot-service-quickstart.md) по построению первого бота или погрузиться в процесс [разработки](~/v4sdk/bot-builder-howto-send-messages.md) ботов.

## <a name="next-steps"></a>Дополнительная информация

Далее бот использует службу Bot Connector для взаимодействия с пользователями разных платформ.

> [!div class="nextstepaction"]
> [Каналы и служба Bot Connector](~/v4sdk/bot-concepts.md)
