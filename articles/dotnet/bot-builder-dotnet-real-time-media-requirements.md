---
title: Требования и рекомендации для интерактивных мультимедийных ботов | Документация Майкрософт
description: Важные требования и рекомендации, связанные с созданием интерактивных мультимедийных ботов для Skype с помощью пакета SDK Bot Framework для .NET.
author: ssulzer
ms.author: ssulzer
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.subservice: sdk
ms.date: 12/13/17
monikerRange: azure-bot-service-3.0
ms.openlocfilehash: d8cd326a3027fe5fcb440d9b205ba7d32a8b1640
ms.sourcegitcommit: b15cf37afc4f57d13ca6636d4227433809562f8b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2019
ms.locfileid: "54224939"
---
# <a name="requirements-and-considerations-for-real-time-media-bots"></a>Требования и рекомендации для интерактивных мультимедийных ботов

[!INCLUDE [pre-release-label](../includes/pre-release-label-v3.md)]

Не все рекомендации по разработке ботов, поддерживающих обмен сообщениями и вызов интерактивных речевых ответов, применимы к интерактивным мультимедийным ботам. В этой статье описаны некоторые важные требования и рекомендации по разработке интерактивных мультимедийных ботов. 

> [!NOTE]
> Так как платформа мультимедиа в реальном времени для ботов — это технология на этапе предварительной версии, рекомендации в этой статье могут быть изменены.

## <a name="real-time-media-bot-development-requires-cnet-and-windows-server"></a>Для разработки интерактивного мультимедийного бота требуется C# или .NET и Windows Server

- Для интерактивного мультимедийного бота требуется библиотека .NET `Microsoft.Skype.Bots.Media` (предоставляется в пакете <a href="https://www.nuget.org/" target="_blank">NuGet</a>), которая используется для доступа к мультимедиа (аудио и видео). Кроме того, для развертывания бота должен использоваться компьютер Windows Server (или гостевая ОС Windows Server в Azure). Таким образом бот должен быть разработан с использованием C# и платформы Standard .NET Framework и развернут в Azure. Интерфейсы API C++ и Node.js невозможно использовать для доступа к мультимедиа в режиме реального времени.

- Интерактивный мультимедийный бот должен быть запущен с помощью последней версии библиотеки .NET `Microsoft.Skype.Bots.Media`. Бот должен использовать либо последнюю версию пакета <a href="https://www.nuget.org/" target="_blank">NuGet</a>, либо версию, которой не более трех месяцев. Более старые версии библиотеки будут считаться нерекомендуемыми и через несколько месяцев не будут работать.

## <a name="real-time-media-calls-stay-on-the-machine-where-they-were-created"></a>Мультимедийные вызовы в режиме реального времени не покидают пределы компьютера, на котором они были созданы

- Интерактивные мультимедийные боты очень зависят от отслеживания состояния. Мультимедийный вызов в режиме реального времени привязывается к экземпляру виртуальной машины, которая приняла входящий вызов. Мультимедийное голосовое и видеосообщение абонента Skype будет передано на этот экземпляр виртуальной машины, и мультимедийное сообщение, возвращаемое ботом абоненту, также должно исходить от этой виртуальной машины.

- В случае остановки виртуальной машины при выполнении мультимедийных вызовов в режиме реального времени мультимедийных они немедленно завершаются. Если бот может узнать о предстоящем завершении работы виртуальной машины, то он может попытаться корректно завершить вызовы.

## <a name="real-time-media-bots-must-be-directly-accessible-on-the-internet"></a>Интерактивные мультимедийные боты должны быть напрямую доступны через Интернет

- Каждый экземпляр виртуальной машины, на котором размещен интерактивный мультимедийный бот, должен быть напрямую доступен из Интернета. Для интерактивных мультимедийных ботов, размещенных в Azure, каждый экземпляр виртуальной машины должен иметь общедоступный IP-адрес уровня экземпляра (ILPIP-адрес). Сведения о получении и настройке ILPIP-адреса см. в разделе <a href="/azure/virtual-network/virtual-networks-instance-level-public-ip" target="_blank">Общие сведения об общедоступных IP-адресах уровня экземпляра (классическая модель развертывания)</a>. По умолчанию подписка Azure позволяет получить 5 ILPIP-адресов. Обратитесь в службу поддержки Azure, чтобы увеличить квоту для своей подписки.

- Ввиду наличия обязательного общедоступного IP-адреса интерактивные мультимедийные боты должны размещаться на виртуальной машине Azure IaaS или в "классической" облачной службе Azure. Другие среды выполнения, например служба Bot или Service Fabric с масштабируемыми наборами виртуальных машин, не поддерживаются, так как они не поддерживают ILPIP-адреса.

- Интерактивные мультимедийные боты также не поддерживаются [Bot Framework Emulator](../bot-service-debug-emulator.md).

## <a name="scalability-and-performance-considerations"></a>Рекомендации по масштабируемости и производительности

- Интерактивные мультимедийные боты требуют больше вычислительной мощности и пропускной способности сети, чем боты для обмена сообщениями, и могут значительно увеличить эксплуатационные расходы. Разработчику интерактивных мультимедийных ботов необходимо тщательно измерить масштабируемость бота и убедиться, что он будет принимать такое число одновременных вызовов, которыми он может управлять. Бот с поддержкой видео может оперировать только одним или двумя параллельными мультимедийными вызовами в режиме реального времени на каждое ядро ЦП.

- Текущий выпуск предварительной версии платформы мультимедиа в реальном времени для ботов имеет определенные ограничения масштабируемости, которые следует учитывать разработчику ботов (это может быть улучшено в будущих выпусках). 
  1. На одном экземпляре виртуальной машины можно одновременно создать не более 10 видеосокетов.
  2. В настоящее время платформа мультимедиа в реальном времени не позволяет использовать преимущества графических процессоров (GPU), доступных на виртуальной машине, для разгрузки кодирования и декодирования видео в формате H.264. Вместо этого кодирование и декодирование видео выполняется в программном обеспечении на ЦП. Если доступен GPU, бот может использовать его преимущества для отрисовки графики (например, если бот использует модуль трехмерной графики).

- Экземпляр виртуальной машины, на котором размещен интерактивный мультимедийный бот, должен иметь по крайней мере 2 ядра ЦП. Для Azure рекомендуется использовать виртуальную машину серии Dv2. Подробные сведения о типах виртуальных машин Azure доступны в <a href="/azure/virtual-machines/windows/sizes-general" target="_blank">документации Azure</a>. 
