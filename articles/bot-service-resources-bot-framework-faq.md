---
title: Часто задаваемые вопросы о службе Bot | Документация Майкрософт
description: Список часто задаваемых вопросов об элементах Bot Framework, а также информация о том, когда будут доступны новые функции.
author: scheyal
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.date: 11/21/2019
ms.openlocfilehash: 4c8a70e4b82e2bc4a5c10d4cf73abf51f5f904ea
ms.sourcegitcommit: 91a393e885b9ef7e08ceb978ce2f567ea38e7f48
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2019
ms.locfileid: "74564404"
---
# <a name="bot-framework-frequently-asked-questions"></a>Часто задаваемые вопросы о Bot Framework

В этой статье приведены ответы на некоторые часто задаваемые вопросы о Bot Framework.

## <a name="background-and-availability"></a>Общие сведения и доступность

### <a name="why-did-microsoft-develop-the-bot-framework"></a>Почему корпорация Майкрософт разработала Bot Framework?

Хотя мы имеем Conversation User Interface (CUI), на данном этапе немногие разработчики обладают опытом и средствами, необходимыми для создания возможностей общения или внедрения диалоговых интерфейсов в имеющиеся приложения и службы, которым пользователи могут воспользоваться. Мы создали Bot Framework, чтобы разработчикам было проще создавать и подключать полезные боты для пользователей везде, где они взаимодействуют, в том числе на главных каналах Майкрософт.

### <a name="what-is-the-v4-sdk"></a>Что такое пакет SDK версии 4?
Пакет SDK Bot Framework версии 4 создавался с учетом отзывов и результатов использования предыдущих пакетов SDK Bot Framework. В нем представлен необходимый уровень абстракции. Кроме того, он обеспечивает широкие возможности компонентизации элементов бота. Вы можете начать с простого бота и усложнять его с помощью модульной расширяемой платформы. [Часто задаваемые вопросы о](https://github.com/Microsoft/botbuilder-dotnet/wiki/FAQ) пакете SDK можно найти на сайте GitHub.

### <a name="running-a-bot-offline"></a>Запуск бота в автономном режиме

<!-- WIP -->
Прежде чем перейти к использованию бота в автономном режиме (что означает, что бот развернут не в Azure или других службах узла, а в локальной среде), давайте проясним некоторые моменты.

- Бот — это веб-служба без пользовательского интерфейса. Поэтому пользователь взаимодействует с ним с помощью других средств. Это каналы, которые используют [службы соединителя Azure](rest-api/bot-framework-rest-connector-concepts.md#bot-connector-service). Соединитель работает в качестве *прокси-сервера* для ретрансляции сообщений между клиентом и ботом.
- **Соединитель** — это глобальное приложение, размещенное в узлах Azure и распределенное географически для обеспечения доступности и масштабируемости. 
- Зарегистрируйте бота для работы с соединителем с помощью колонки [регистрации канала бота](bot-service-quickstart-registration.md).
    >[!NOTE]
    > Конечная точка бота должна быть общедоступной для соединителя.

Вы можете запустить бота в автономном режиме с ограниченными возможностями. Например, если вы хотите использовать бота в автономном режиме с возможностью LUIS, создайте контейнер для бота, а также необходимые инструменты и контейнер для LUIS. Оба контейнера подключены через промежуточную сеть Docker Compose.

Это частично автономное решение, так как контейнеру Cognitive Services периодически требуется подключение к сети.

> [!NOTE]
> При работе в автономном режиме бот не поддерживает службу QnA.

Дополнительные сведения можно найти в разделе

- [Deploy the Language Understanding (LUIS) container to Azure Container Instances](https://docs.microsoft.com/azure/cognitive-services/luis/deploy-luis-on-container-instances) (Развертывание контейнера Распознавания речи (LUIS) в службе "Экземпляры контейнеров Azure")
- [Container support in Azure Cognitive Services](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-container-support) (Поддержка контейнеров в Azure Cognitive Services)

## <a name="bot-framework-sdk-version-3-lifetime-support-and-deprecation-notice"></a>Поддержка жизненного цикла SDK Bot Framework версии 3 и уведомление о прекращении использования
Пакет SDK для Microsoft Bot Framework версии 4 был выпущен в сентябре 2018, после чего были опубликованы несколько выпусков с исправлениями и улучшениями. Как было объявлено ранее, мы прекращаем поддержку пакета SDK версии 3. Соответственно, прекращается и разработка в репозиториях для версии 3. **Существующие рабочие нагрузки ботов для версии 3 продолжат работу без прерываний. Мы не планируем вмешиваться в выполнение таких рабочих нагрузок**.

Как уже упоминалось, боты на основе SDK Bot Builder версии 3 будут и далее работать и поддерживаться службой Azure Bot. Поддержка пакета SDK Bot Builder версии 3 ограничится критическими исправлениями ошибок безопасности и обновлениями совместимости уровней соединителя и протокола.  

Все новые функции и возможности разрабатываются исключительно для [SDK Bot Framework версии 4](https://github.com/microsoft/botframework-sdk).  Мы рекомендуем всем пользователям как можно скорее перенести все боты на версию 4.

Настоятельно рекомендуем начать перенос ботов с версии 3 в версию 4. Чтобы упростить этот перенос, мы подготовили документацию по миграции и окажем расширенную поддержку инициативам по переносу (через такие стандартные каналы, как Stack Overflow и Служба поддержки пользователей Майкрософт).

Чтобы получить дополнительные сведения, перейдите по указанным ниже ссылкам.
* [Основные рекомендации по миграции](https://aka.ms/bfv3v4migration)
* Основные репозитории версии 4 для разработки ботов на Bot Framework
  * [Botbuilder для .NET](https://github.com/microsoft/botbuilder-dotnet)
  * [Botbuilder для JS](https://github.com/microsoft/botbuilder-js) 
* Библиотеки QnA Maker заменены следующими библиотеками версии 4:
  * [Библиотеки для .NET](https://github.com/Microsoft/botbuilder-dotnet/tree/master/libraries/Microsoft.Bot.Builder.AI.QnA)
  * [Библиотеки для JS](https://github.com/Microsoft/botbuilder-js/blob/master/libraries/botbuilder-ai/src/qnaMaker.ts)
* Библиотеки Azure заменены следующими библиотеками версии 4:
  * [Botbuilder для JS Azure](https://github.com/Microsoft/botbuilder-js/tree/master/libraries/botbuilder-azure)
  * [Botbuilder для .NET Azure](https://github.com/Microsoft/botbuilder-dotnet/tree/master/libraries/Microsoft.Bot.Builder.Azure)

### <a name="v3-status-summary"></a>Сводка состояния для версии 3

#### <a name="abs-service"></a>Служба Azure Bot
1.  На стороне службы Azure Bot сохраняется поддержка выполняемых ботов версии 3, и мы не планируем завершать срок их службы или препятствовать выполнению существующих ботов. 
2.  Для каналов сохранится совместимость с версией 3 без перерывов в работе. Завершение их срока службы не планируется.
3.  Создание новых ботов версии 3 на портале теперь невозможно, но опытные пользователи смогут развернуть бот версии 3 в другом расположении за пределами Azure Bot (например, в качестве службы веб-приложения).

#### <a name="sdk-and-tools"></a>Пакет SDK и средства

1.  Мы прекращаем развитие пакета SDK версии 3. В обозримом будущем для ветвей пакета SDK появятся лишь критические исправления безопасности (с одним исключением: мы планируем добавить соединитель навыков, чтобы боты версии 4 могли взаимодействовать с ботам версии 3).
2.  Разработка пакетов SDK и средств будет выполняться исключительно для версии 4. Для версии 3 никаких работ не предусмотрено.
3.  Вы можете продолжить пользоваться устаревшими средства для управления ботами версии 3. 

## <a name="how-can-i-migrate-azure-bot-service-from-one-region-to-another"></a>Как перенести службу Azure Bot из одного региона в другой?

Служба Azure Bot не поддерживает перемещение между регионами. Это глобальная служба, не привязанная ни к одному конкретному региону.

## <a name="channels"></a>Каналы
### <a name="when-will-you-add-more-conversation-experiences-to-the-bot-framework"></a>Когда добавятся дополнительные возможности общения для Bot Framework?

Мы планируем непрерывное усовершенствование Bot Framework, включая дополнительные каналы, но в данный момент точного расписания еще нет.  
Если вы хотите добавить на платформу конкретный канал, [сообщите нам][Support].

### <a name="i-have-a-communication-channel-id-like-to-be-configurable-with-bot-framework-can-i-work-with-microsoft-to-do-that"></a>У меня есть коммуникационный канал, в который следует добавить возможность настройки с помощью Bot Framework. Могу ли я обратиться в корпорацию Майкрософт, чтобы сделать это?

Мы не предоставляем общий механизм добавления новых каналов в Bot Framework для разработчиков, но вы можете подключить бот к приложению с помощью [Direct Line API][DirectLineAPI]. Если вы являетесь разработчиком коммуникационного канала и хотите работать с нами, чтобы включить свой канал в Bot Framework, [мы с радостью поможем вам][Support].

### <a name="if-i-want-to-create-a-bot-for-microsoft-teams-what-tools-and-services-should-i-use"></a>Если требуется создать бот для Microsoft Teams, какие инструменты и службы следует использовать?

Bot Framework предназначен для создания, подключения и развертывания высококачественных, быстрых, высокопроизводительных и масштабируемых ботов для Teams и многих других каналов. Пакет SDK можно применять для создания ботов, которые взаимодействуют с пользователями с использованием текста или SMS, изображений, кнопок и карточек (они составляют большинство взаимодействий бота при общении), а также для создания взаимодействий ботов для Teams формата аудио и видео.

Если у вас уже есть хороший бот, который вы намерены вывести в Teams, его можно легко подключить к этому или любому другому поддерживаемому каналу с помощью Bot Framework для REST API (если для него существует доступная через Интернет конечная точка REST).

### <a name="how-do-i-create-a-bot-that-uses-the-us-government-data-center"></a>Как создать бот, использующий центр обработки данных для государственных организаций США?

Такой бот создается за два основных шага.
1. Добавьте в файл Appsettings.json (или параметры Службы приложений) параметр поставщика канала. Это необходимо сделать именно для такой константы "имя — значение": ChannelService = "https://botframework.azure.us". Ниже приведен пример использования Appsetting.json.

```json
{
  "MicrosoftAppId": "", 
  "MicrosoftAppPassword": "",
  "ChannelService": "https://botframework.azure.us"
}
```
2. Если вы используете .NET Core, необходимо будет добавить ConfigurationChannelProvider в файл Startup.cs. Способ добавления зависит от используемой версии пакета SDK.

- Для версии 4.3 и более поздних в методе ConfigureServices нужно создать экземпляр ConfigurationChannelProvider. Если используется класс BotFrameworkHttpAdapter, вставьте экземпляр в составе singleton в коллекцию службы таким образом:

```csharp  
services.AddSingleton<IChannelProvider, ConfigurationChannelProvider>();
```
- Если используете более раннюю версию .NET Core, в методе ConfigureServices найдите метод AddBot. При установке параметров обязательно добавьте следующее:

```csharp
options.ChannelProvider = new ConfigurationChannelProvider();
```
Дополнительные сведения, касающиеся государственных служб, см. [здесь](https://docs.microsoft.com/azure/azure-government/documentation-government-services-aiandcognitiveservices#azure-bot-service).

## <a name="security-and-privacy"></a>Безопасность и конфиденциальность
### <a name="do-the-bots-registered-with-the-bot-framework-collect-personal-information-if-yes-how-can-i-be-sure-the-data-is-safe-and-secure-what-about-privacy"></a>Собирают ли боты, зарегистрированные в Bot Framework, личную информацию? Если да, то как можно убедиться в том, что данные сохранены надежно и безопасно? Как насчет конфиденциальности?

Каждый бот имеет собственную службу, и разработчики этих служб обязаны предоставлять условия обслуживания и заявление о конфиденциальности в соответствии с правилами поведения разработчиков.  Эти сведения доступны на карточке бота в каталоге ботов.

Для предоставления службы ввода-вывода Bot Framework передает сообщения и содержимое сообщения (включая идентификатор) из используемой службы чатов боту.

### <a name="can-i-host-my-bot-on-my-own-servers"></a>Могу ли я разместить бот на своих серверах?
Да. Вы можете разместить свой бот в любом расположении в Интернете. Это можно сделать на своих серверах, а также в Azure или любом другом центре обработки данных. Нужно только, чтобы бот предоставлял общедоступную конечную точку HTTPS.

### <a name="how-do-you-ban-or-remove-bots-from-the-service"></a>Как вы блокируете или удаляете боты из службы?

Пользователи могут сообщить о некорректно работающем боте с помощью карточки контакта бота в каталоге. Разработчики должны соблюдать условия предоставления услуг Майкрософт, чтобы участвовать в предоставлении службы.

### <a name="which-specific-urls-do-i-need-to-whitelist-in-my-corporate-firewall-to-access-bot-framework-services"></a>Какие именно URL-адреса нужно добавить в список разрешений в моем корпоративном брандмауэре для доступа к службам Bot Framework?
При наличии брандмауэра, который блокирует исходящий трафик, перенаправляемый от бота в Интернет, нужно добавить в список разрешений этого брандмауэра следующие URL-адреса:
- login.botframework.com (проверка подлинности бота);
- login.microsoftonline.com (проверка подлинности бота);
- westus.api.cognitive.microsoft.com (для интеграции Luis.ai NLP);
- state.botframework.com (хранилище состояний бота для создания прототипов);
- cortanabfchanneleastus.azurewebsites.net (канал Кортаны);
- cortanabfchannelwestus.azurewebsites.net (канал Кортаны);
- *.botFramework.com (каналы).

### <a name="can-i-block-all-traffic-to-my-bot-except-traffic-from-the-bot-connector-service"></a>Можно ли заблокировать весь трафик, перенаправляемый в бот, кроме трафика от службы Bot Connector?
№ Такое добавление IP-адресов или DNS в список разрешений непрактично. Служба Bot Framework Connector размещена в центрах обработки данных Azure по всему миру, и список IP-адресов Azure постоянно меняется. Добавление в список разрешений определенных IP-адресов будет эффективно только на один день, так как IP-адреса Azure меняются.
 
### <a name="what-keeps-my-bot-secure-from-clients-impersonating-the-bot-framework-connector-service"></a>Какие есть способы защиты от клиентов, олицетворяющих службы Bot Framework Connector?
1. Маркер безопасности, который указан в каждом запросе к боту содержит закодированный URL-адрес службы (ServiceUrl). Это означает, что даже если злоумышленник получит доступ к маркеру, он не сможет перенаправить диалог на новый URL-адрес службы. Это реализовано во всех пакетах SDK и описано в наших [справочных материалах по аутентификации](https://docs.microsoft.com/azure/bot-service/rest-api/bot-framework-rest-connector-authentication?view=azure-bot-service-3.0#bot-to-connector).

2. Если входящий маркер отсутствует или имеет неправильный формат, пакет SDK для Bot Framework не создаст маркер в ответ. Это позволяет ограничить ущерб, если бот настроен неправильно.
3. В боте вы можете вручную проверить, указан ли параметр ServiceUrl в маркере. В результате бот станет более уязвимым, если топология службы изменится. То есть это возможно, но не рекомендуется.


Обратите внимание, что это касается исходящих подключений к Интернету из бота. Списка IP-адресов или DNS-имен, которые служба Bot Framework Connector будет использовать для обращения к боту, нет. Добавление IP-адресов в список разрешений не поддерживается.

## <a name="rate-limiting"></a>Ограничение частоты
### <a name="what-is-rate-limiting"></a>Что являет собой ограничения частоты?
Служба Bot Framework должна защищать себя и своих клиентов от вредоносных вызов (например, атака типа "отказ в обслуживании"), чтобы ни один бот не мог отрицательно повлиять на производительность других ботов. Чтобы обеспечить такую защиту, мы добавили ограничение частоты (также известное как регулирование) ко всем конечным точкам. Применяя ограничение частоты, мы можем ограничить частоту, с которой бот может сделать определенный вызов. Например, если с включенным ограничением частоты бот захотел опубликовать большое количество действий, ему пришлось бы исключить их в течение определенного периода времени. Обратите внимание, что целью ограничения скорости не является ограничение общего объема для бота. Оно предназначено для предотвращения злоупотребления диалоговой инфраструктурой, которая не соответствует шаблонам человеческих бесед.

### <a name="how-will-i-know-if-im-impacted"></a>Как узнать, затрагивает ли это меня?
Вряд ли вы испытаете ограничение скорости, даже при большом объеме. Большинство ограничений частоты будет возникать только из-за массовой отправки действий (от бота или от клиента), максимального нагрузочного тестирования или ошибки. Когда запрос регулируется, возвращается ответ HTTP 429 (слишком много запросов) вместе с заголовком Retry-After, указывающим время ожидания (в секундах) до повторной попытки запроса. Вы можете собирать эту информацию, включив аналитику для своего бота с помощью Azure Application Insights. Или вы можете добавить код в бот для записи сообщений. 

### <a name="how-does-rate-limiting-occur"></a>Как возникает ограничение частоты?
Это может произойти, если:
-   бот отправляет сообщения слишком часто;
-   клиент бота отправляет сообщения слишком часто;
-   клиент Direct Line запрашивает новый веб-сокет слишком часто;

### <a name="what-are-the-rate-limits"></a>Каковы ограничения частоты?
Мы постоянно настраиваем ограничения частоты, чтобы сделать их настолько "щадящими", насколько это возможно, в то же время защищая службы и пользователей. Так как пороговые значения будут иногда меняться, мы не публикуем их. Если вас затронули ограничения частоты, вы можете связаться с нами по адресу [bf-reports@microsoft.com](mailto://bf-reports@microsoft.com).

## <a name="related-services"></a>Связанные службы
### <a name="how-does-the-bot-framework-relate-to-cognitive-services"></a>Как Bot Framework связан с Cognitive Services?

Bot Framework и [Cognitive Services](https://www.microsoft.com/cognitive) — это новые возможности, представленные на [Microsoft Build 2016](https://build.microsoft.com). Они также будут интегрированы в общедоступную версию Cortana Intelligence Suite. Обе эти службы построены на основе многолетних исследований и используются в популярных продуктах корпорации Майкрософт. Эти возможности в сочетании с Cortana Intelligence позволяют каждой организации использовать преимущества данных, облака и аналитики для создания собственных интеллектуальных систем, которые открывают новые возможности, ускоряют развитие бизнеса и лидируют в сферах, в которых организации обслуживают своих клиентов.

### <a name="what-is-cortana-intelligence"></a>Что такое Cortana Intelligence?

Cortana Intelligence — это полностью управляемое решение для расширенной аналитики, анализа и работы с большими данными, которое позволяет преобразовывать данные в обоснованные действия.  
Это комплексный набор, который объединяет в себе технологии, основанные на многолетних исследованиях и инновациях корпорации Майкрософт (объединение расширенной аналитики, машинного обучения, хранения больших данных и обработки данных в облаке), который:

* позволяет собирать, контролировать и хранить все данные, которые могут легко и без лишних затрат расти с течением времени масштабируемым и безопасным путем;
* предоставляет легкую и действенную облачную аналитику, которая позволяет прогнозировать, предписывать и автоматизировать принятие решений в наиболее сложных проблемах;
* включает интеллектуальные системы через Cognitive Services и агенты, которые позволяют вам видеть, слышать, интерпретировать и понимать мир вокруг вас более контекстным и естественным образом.

С помощью Cortana Intelligence мы надеемся помочь своим корпоративным клиентам открывать новые возможности, увеличивать скорость работы их бизнеса и быть лидерами в своих отраслях.

### <a name="what-is-the-direct-line-channel"></a>Что такое канал Direct Line?

Direct Line — это REST API, который позволяет добавить бот в службу, мобильное приложение или на веб-страницу.

Вы можете писать клиент API для Direct Line на любом языке. Просто введите код для [протокола Direct Line][DirectLineAPI], создайте секрет на странице конфигурации Direct Line и поговорите со своим ботом, где бы ни находился ваш код.

Direct Line подходит для:

* мобильных приложений iOS, Android и Windows Phone и других;
* классических приложений Windows, OSX и других;
* веб-страниц, где нужно больше настроек, чем для [встраиваемого канала "Веб-чат"][WebChat];
* приложений для обмена данными между службами.


## <a name="app-registration"></a>Регистрация приложения

### <a name="i-need-to-manually-create-my-app-registration-how-do-i-create-my-own-app-registration"></a>Мне нужно вручную создать собственную регистрацию приложения. Как это сделать?

Создать другую регистрацию приложения будет необходимо в таких случаях:

- Вы создали бот на портале Bot Framework (например, https://dev.botframework.com/bots/new). 
- Вы не можете регистрировать приложения в своей организации, и требуется третья сторона, чтобы создать идентификатор приложения для бота, сборка которого выполняется.
- В других случаях, когда необходимо вручную создать свой идентификатор приложения (и пароль).

Чтобы создать другой идентификатор для приложения, выполните действия ниже.

1. Войдите в [учетную запись Azure](https://portal.azure.com). Если ее нет, вы можете [зарегистрироваться и получить бесплатную учетную запись](https://azure.microsoft.com/free/).
2. Перейдите к [колонке регистрации приложений](https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade) и на панели действий вверху нажмите кнопку **Новая регистрация**.

    ![новая регистрация](media/app-registration/new-registration.png)

3. Введите отображаемое имя для регистрации приложения в поле *Имя* и выберите тип среди поддерживаемых типов учетных записей. Это имя не должно совпадать с идентификатором бота.

    > [!IMPORTANT]
    > В разделе *Поддерживаемые типы учетных записей* установите переключатель *Учетные записи в любом каталоге организации и личные учетные записи Майкрософт (например, Skype, Xbox, Outlook.com)* . Если выбрать любой другой вариант, **произойдет ошибка создания бота**.

    ![настройки регистрации](media/app-registration/registration-details.png)

4. Щелкните **Зарегистрировать**.

    Через несколько секунд в созданной регистрации приложения откроется колонка. Скопируйте данные в поле *Application (client) ID* (Идентификатор приложения (клиента)) в колонке "Обзор" и вставьте его в поле идентификатора приложения.

    ![идентификатор приложения](media/app-registration/app-id.png)

Если вы создаете бот на портале Bot Framework, то настройка регистрации приложения уже будет завершена. Секрет будет создан автоматически. 

Если вы создаете бот на портале Azure, для регистрации вашего приложения необходимо будет создать секрет. 

1. В колонке регистрации приложения в левой области навигации щелкните **Certificates & secrets** (Сертификаты и секреты).
2. В этой колонке нажмите кнопку **New client secret** (Создать секрет клиента). В открывшемся диалоговом окне введите описание (необязательно) и выберите вариант **Никогда** для переключателя "Истекает срок действия". 

    ![создание секрета](media/app-registration/new-secret.png)

3. Скопируйте значение секрета в таблице в разделе *Секреты клиента* и вставьте его в поле *Пароль* своего приложения, а затем нажмите кнопку **ОК** внизу этой колонки. Далее создайте бот. 

    > [!NOTE]
    > Секрет будет показан только в этой колонке, и вы не сможете получить его, если уйдете с этой страницы. Скопируйте его в безопасное место.

    ![создание идентификатора приложения](media/app-registration/create-app-id.png)


[DirectLineAPI]: https://docs.microsoft.com/azure/bot-service/rest-api/bot-framework-rest-direct-line-3-0-concepts
[Support]: bot-service-resources-links-help.md
[WebChat]: bot-service-channel-connect-webchat.md
