---
title: Аналитические сведения бота | Документация Майкрософт
description: Узнайте, как использовать сбор и анализ данных для оптимизации бота с помощью аналитики в Bot Framework.
keywords: bot analytics, application insights, traffic, latency, integrations, AppInsights
author: RobStand
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
ms.openlocfilehash: 503e9b2231b198346f5a7cd767a1e6a866e9e5b3
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2018
ms.locfileid: "39305102"
---
# <a name="bot-analytics"></a>Аналитика бота
Analytics — это расширение [Application Insights](/azure/application-insights/app-insights-analytics). Application Insights предоставляет данные **уровня службы** и данные инструментирования, например трафик, задержку и интеграции. Analytics поддерживает отчеты **уровня общения** для данных пользователя, сообщений и каналов.

## <a name="view-analytics-for-a-bot"></a>Просмотр аналитики для бота
Чтобы получить доступ к Analytics, откройте бот на портале разработчика и щелкните **Analytics**.

Слишком много данных? [Включите и настройте выборку](/azure/application-insights/app-insights-sampling), чтобы сократить объем трафика телеметрии и хранимых данных и сохранить статистически верный анализ. 

### <a name="specify-channel"></a>Указание канала
Выберите, какие каналы отображаются на схемах ниже. Обратите внимание, что если бот не включен на канале, данные этого канала будут отсутствовать.

![Выбор канала](~/media/analytics-channels.png)

* Установите флажок, чтобы включить канал в диаграмму.
* Снимите флажок, чтобы удалить канал из диаграммы.

### <a name="specify-time-period"></a>Указание периода времени
Анализ доступен только за последние 90 дней. Сбор данных начинается после включения Application Insights.

![Выбор периода времени](~/media/analytics-timepick.png)

Щелкните стрелку раскрывающегося меню и выберите количество времени отображения диаграммы.
Обратите внимание, что изменение общего интервала времени приведет к соответствующему изменению шага приращения времени (ось X) на диаграммах.

### <a name="grand-totals"></a>Общий итог
Общее число активных пользователей и сообщений, отправленных и полученных в течение заданного интервала времени.
Дефисы `--` указывают на отсутствие действий.

### <a name="retention"></a>Сохранение
При хранении отслеживается, сколько пользователей, отправивших одно сообщение, вернулись позже и отправили еще одно.
Диаграмма — это скользящее 10-дневное окно; результаты не изменяются при изменении интервала времени.

![Диаграмма хранения](~/media/analytics-retention.png)

Обратите внимание, что последняя возможная дата — два дня назад. Пользователь отправил сообщение позавчера и *вернулся* вчера.

### <a name="user"></a>Пользователь
На диаграмме пользователей отслеживается, сколько пользователей получили доступ к боту с помощью каждого канала за указанный интервал времени.

![Диаграмма пользователей](~/media/analytics-users.png)

* На процентной диаграмме указано процентное соотношение пользователей, использовавших каждый канал.
* На линейном графике показано, сколько пользователей получали доступ к боту за определенное время.
* В условных обозначениях линейного графика указано цветовое представление каждого канала и общее число пользователей во время заданного периода времени.

### <a name="messages"></a>Сообщения
На диаграмме сообщений отслеживается количество сообщений, отправленных и полученных с помощью каждого канала за указанный интервал времени.

![Диаграмма сообщений](~/media/analytics-messages.png)

* На процентной диаграмме показано процентное соотношение сообщений, переданных по каждому каналу.
* В линейном графике показано количество сообщений, полученных и отправленных через заданный интервал времени.
* В условных обозначениях линейного графика указано цветовое линейное представление каждого канала и общее число сообщений, отправленных и полученных на этом канале во время заданного периода времени. 

## <a name="enable-analytics"></a>Включение аналитики
Чтобы расширение Analytics стало доступно, нужно включить и настроить Application Insights. После включения Application Insights начнет собирать данные. Например, если служба Application Insights включена неделю назад для бота, созданного шесть месяцев назад, он соберет данные за неделю.
> [!NOTE]
> Analytics требуется [ресурс](/azure/application-insights/app-insights-create-new-resource) подписки Azure и Application Insights.
Чтобы получить доступ к Application Insights, откройте бот на [портале Bot Framework](https://dev.botframework.com/) и щелкните **Параметры**.

1. Создайте ресурс [Application Insights](/azure/application-insights/app-insights-create-new-resource).
2. Откройте бот на панели мониторинга. Щелкните **Параметры** и прокрутите вниз до раздела **Analytics**.
3. Введите сведения для подключения бота к Application Insights. Все поля обязательные.

![Подключение Insights](~/media/analytics-enable.png)

### <a name="appinsights-instrumentation-key"></a>Ключ инструментирования AppInsights
Чтобы найти это значение, откройте Application Insights и выберите **Настройка** > **Свойства**.

### <a name="appinsights-api-key"></a>Ключ API AppInsights
Укажите ключ API Azure App Insights. Узнайте, как [создать ключ API](https://dev.applicationinsights.io/documentation/Authorization/API-key-and-App-ID). Требуется только разрешение на **чтение**.

### <a name="appinsights-application-id"></a>Идентификатор приложения AppInsights
Чтобы найти это значение, откройте Application Insights и выберите **Настройка** > **Доступ через API**.

Дополнительные сведения о том, как найти эти значения, см. в статье [Ключи Application Insights](~/bot-service-resources-app-insights-keys.md).

## <a name="additional-resources"></a>Дополнительные ресурсы
* [Ключи Application Insights](~/bot-service-resources-app-insights-keys.md)