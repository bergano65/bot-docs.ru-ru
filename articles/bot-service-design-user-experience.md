---
title: Проектирование взаимодействия с пользователем | Документация Майкрософт
description: Узнайте, как создать привлекательный бот, используя функциональные пользовательские элементы управления, распознавание естественного языка и речи.
keywords: overview, design, user experience, UX, rich user control
author: matvelloso
ms.author: mateusv
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 12/13/2017
ms.openlocfilehash: 21f5b35e992f792a5667ef05d2708b5a446f8023
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/18/2018
ms.locfileid: "39304959"
---
# <a name="design-the-user-experience"></a>Проектирование взаимодействия с пользователем

Боты обычно используют определенную комбинацию **функциональных пользовательских элементов управления**, **текста и естественного языка** и **речь** для обмена информацией с пользователями.

## <a name="rich-user-controls"></a>Функциональные пользовательские элементы управления

**Функциональные пользовательские элементы управления** — это обычные элементы пользовательского интерфейса, такие как кнопки, изображения, карусели и меню, которые бот представляет пользователю и с которыми пользователь, в свою очередь, взаимодействует для выражения выбора и намерения. Бот может использовать коллекцию элементов управления пользовательского интерфейса для имитации приложения или даже запускаться, будучи встроенным в приложение. Когда бот встроен в приложение или на веб-сайт, он может представлять практически любой элемент управления пользовательского интерфейса, используя возможности приложения, в котором он размещен. 

На протяжении десятилетий разработчики приложений и веб-сайтов полагались на элементы управления пользовательского интерфейса, чтобы пользователи могли взаимодействовать со своими приложениями. Эти же элементы управления пользовательского интерфейса также могут быть очень эффективными в ботах. Например, кнопки — это отличный способ предоставить пользователю простой выбор. Пользователю проще и быстрее выбрать "Отели", нажав кнопку с надписью **Отели**, чем вводить это слово на клавиатуре. Это особенно справедливо на мобильных устройствах, где щелчок значительно предпочтительнее ввода.

## <a name="cards"></a>Карточки

Карточки позволяют предоставлять пользователям различные визуальные, звуковые и/или выбираемые сообщения и помогают в ведении диалога. Если пользователь должен выбрать из фиксированного набора элементов, вы можете отобразить карусель карточек, каждая из которых содержит изображение, текстовое описание и одну кнопку для выбора. Если у пользователя есть набор вариантов для одного элемента, вы можете представить меньшее одиночное изображение и набор кнопок с различными параметрами на выбор. Запрашивал ли пользователь дополнительную информацию по теме? Карточки могут предоставлять подробную информацию, используя выходное аудио или видео, или квитанцию, в которой подробно описывается история покупок. Существует невероятно широкий диапазон использования карточек, которые помогут вести диалог между вашим пользователем и ботом. Тип используемой карточки будет определяться потребностями приложения. Давайте подробнее рассмотрим карточки, их действия и некоторые рекомендуемые способы применения. 

Карточки Microsoft Bot Service — это программируемые объекты, содержащие стандартизованные коллекции функциональных пользовательских элементов управления, которые распознаются в широком спектре каналов. В следующей таблице приведен список доступных карточек и рекомендации по использованию для каждого типа.

| Тип карточки | Пример | ОПИСАНИЕ |
| ---- | ---- | ---- |
| AdaptiveCard (адаптивная карточка) | ![Изображение адаптивной карточки](~/media/adaptive-card.png) | Открытый формат обмена карточками, передаваемый как объект JSON. Обычно используется для межканального развертывания карточек. Карточки адаптируются к внешнему виду каждого канала узла. |
| AnimationCard (анимационная карточка) | ![Изображение анимационной карточки](~/media/animation-card1.png) | Карточка, которая может воспроизводить GIF-файлы с анимацией или короткие видеоролики. |
| AudioCard (аудиокарточка) | ![Изображение аудиокарточки](~/media/audio-card.png) | Карточка, которая может воспроизводить звуковой файл. |
| HeroCard (имиджевая карточка) | ![Изображение аудиокарточки для имиджевого баннера](~/media/hero-card1.png) | Карточка, которая содержит одно большое изображение, одну или несколько кнопок и текст. Обычно используется для визуального выделения потенциального варианта выбора пользователя. |
| ThumbnailCard (эскизная карточка) | ![Изображение карточки с эскизом](~/media/thumbnail-card.png) | Карточка, которая содержит один эскиз, одну или несколько кнопок и текст. Обычно используется для визуального выделения кнопок для потенциального выбора пользователя. |
| ReceiptCard (карточка квитанции) | ![Изображение карточки квитанции](~/media/receipt-card1.png) | Карточка, с помощью которой бот выдает квитанцию пользователю. Обычно она содержит список элементов, включаемых в квитанцию, налог, а также общую информацию и другой текст. |
| SignInCard (карточка входа в систему) | ![Изображение карточки входа](~/media/sign-in-card.png) | Карточка, в которой бот запрашивает вход пользователя. Обычно она содержит текст и одну или несколько кнопок, которые можно нажать, чтобы начать процесс входа. |
| SuggestedAction (карточка рекомендуемых действий) | ![Изображение карточки рекомендуемых действий](~/media/suggested-actions.png) | Представляет вашему пользователю набор CardActions, представляющий собой выбор пользователя. Эта карточка исчезает после выбора любого из рекомендуемых действий. |
| VideoCard (видеокарточка) | ![Изображение видеокарточки](~/media/video-card.png) | Карточка, которая может воспроизводить видео. Обычно используется для открытия URL-адреса и потокового воспроизведения доступного видео. |
| CardCarousel (карусель карточек) | ![Изображение карусели карточек](~/media/card-carousel.png) | Горизонтально прокручиваемая коллекция карточек, которая позволяет пользователю легко просматривать ряд возможных пользовательских вариантов выбора.|

Карточки позволяют вам создать свой бот один раз и обеспечить его работу на разных каналах. Однако не все типы карточек полностью поддерживаются на всех доступных каналах. В следующих таблицах показана выборка текущей поддержки типов карточек на разных каналах. Чтобы получить самые новые сведения о поддержке канала, обязательно воспользуйтесь [Channel Inspector](bot-service-channel-inspector.md). Это решение даст вам возможность увидеть, как выглядят и функционируют определенные карточки на интересующем вас канале. Чтобы получить более подробные сведения об адаптивных карточках, обязательно ознакомьтесь с <a href="http://adaptivecards.io/visualizer/">визуализатором адаптивных карточек</a>.

В приведенной ниже таблице показаны данные о поддержке каналов для типов карточек, которые обычно используются в каруселях.

| Канал | Адаптивная | Имиджевая | Эскизная | Карусель |
| ---- | ---- | ---- | ---- | ---- |
| Кортана | ✔ | ✔ | ✔ | ✔ |
| Электронная почта Office 365 | ✔ | ✔ | ✔ | ✔ |
| Facebook | - | ✔ | ✔ | ✔ |
| Kik | ✔ | ✔ | ✔ | ✔ |
| Skype | ✔ | ✔ | ✔ | ✔ |
| Slack | ✔ | ✔ | ✔ | ✔ |
| SMS | ✔ | ✔ | ✔ | ✔ |
| Команды | ✔ | ✔ | ✔ | ✔ |
| Веб-чат | ✔ | ✔ | ✔ | ✔ |

В следующей таблице показаны данные о поддержке каналов для дополнительных типов карточек Microsoft Bot Service.

| Канал | Видеокарточка | Карточка квитанции | Карточка входа в систему | Карточка рекомендуемых действий |
| ---- | ---- | ---- | ---- | ---- |
| Кортана | ✔ | ✔ | ✔ | - |
| Электронная почта Office 365 | ✔ | ✔ | ✔ | ✔ |
| Facebook | ✔ | ✔ | ✔ | ✔ |
| Kik | ✔ | ✔ | ✔ | ✔ |
| Skype | ✔ | ✔ | ✔ | ✔ |
| Slack | ✔ | ✔ | ✔ | ✔ |
| SMS | ✔ | ✔ | - | ✔ |
| Команды | - | ✔ | ✔ | - |
| Веб-чат | ✔ | ✔ | ✔ | ✔ |

✔ = поддерживается

Подробные инструкции по добавлению карточек в ваш бот можно найти в статьях [Добавление мультимедиа в сообщения](v4sdk/bot-builder-howto-add-media-attachments.md) и [Add suggested actions to messages](v4sdk/bot-builder-howto-add-suggested-actions.md) (Добавление предлагаемых действий в сообщения).

При разработке своего бота не следует автоматически отклонять общие элементы пользовательского интерфейса, из-за того, что их возможностей недостаточно. Как уже было сказано [ранее](~/bot-service-design-principles.md#designing-a-bot), бот должен быть разработан таким образом, чтобы решить проблему пользователя самым оптимальным, быстрым и простым способом. Избегайте соблазна начать с внедрения возможности распознавания естественного языка, так как зачастую это не нужно и неоправданно усложняет процесс.

> [!TIP]
> Начните с использования минимального количества элементов управления пользовательского интерфейса, которые позволяют боту решать проблему пользователя, и добавляйте другие элементы позже, если текущих будет недостаточно.


## <a name="text-and-natural-language-understanding"></a>Распознавание текста и естественного языка

Бот может принимать **текст** от пользователей и пытаться проанализировать его с использованием соответствующего регулярного выражения или **API-интерфейсов для распознавания естественного языка** , например <a href="https://www.luis.ai" target="_blank">LUIS</a>. В зависимости от типа входных данных, предоставляемых пользователем, распознавание естественного языка может оказаться оптимальным или не очень решением.

В некоторых случаях пользователь может **отвечать на конкретный вопрос**. Например, если бот спрашивает: "Как вас зовут?", пользователь может ответить с помощью текста, в котором указано только имя ("Джон"), или с помощью предложения ("Меня зовут Джон").

Формулировка конкретного вопроса уменьшает объем возможных ответов, которые бот может получить, что упрощает логику, необходимую для синтаксического анализа и понимания ответа. Например, рассмотрим следующий открытый вопрос: "Как вы себя чувствуете?". Охватить множество возможных ответов на такой вопрос — очень сложно.

В противоположность этому, такие конкретные вопросы, как "Вам больно? Да или нет" и "Что у вас болит? Грудь, голова, рука или нога", скорее всего, будут способствовать более конкретным ответам, которые бот сможет проанализировать и понять без необходимости реализации распознавания естественного языка. 

> [!TIP]
> По возможности задавайте конкретные вопросы, которые не потребуют возможностей распознавания естественного языка для анализа ответа. Это упростит ваш бот и повысит вероятность понимания пользователя ботом.

  
В других случаях пользователь может **вводить определенную команду**. Например, бот DevOps, который позволяет разработчикам управлять виртуальными машинами, может быть разработан для принятия определенных команд, таких как /STOP VM XYZ или /START VM XYZ. Проектирование бота для принятия определенных команд, подобных этим, обеспечивает хорошее взаимодействие с пользователем, так как синтаксис прост в освоении и ожидаемый результат каждой команды ясен. Кроме того, боту не потребуется распознавание естественного языка, так как входные данные пользователя можно легко проанализировать с использованием регулярных выражений. 

> [!TIP]
> При проектировании бота, требующего от пользователя ввода конкретных команд, вы зачастую обеспечиваете оптимальное взаимодействие с пользователем и устраняете необходимость в распознавании естественного языка.

  
В случае бота *базы знаний* или бота *вопросов и ответов* пользователь может **задавать общие вопросы**. Например, представьте себе бот, который может отвечать на вопросы, основываясь на содержании тысяч документов. <a href="https://qnamaker.ai" target="_blank">QnA Maker</a> и <a href="https://azure.microsoft.com/en-us/services/search/" target="_blank">Поиск Azure</a> — это технологии, специально разработанные для этого типа сценариев. Дополнительные сведения см. в статье [Проектирование ботов базы знаний](bot-service-design-pattern-knowledge-base.md).

> [!TIP]
> Если вы разрабатываете бот, который будет отвечать на вопросы на основе структурированных или неструктурированных данных из баз данных, веб-страниц или документов, попробуйте использовать технологии, специально разработанные для этого сценария, а не решайте проблему за счет распознавания естественного языка.

  
В других сценариях пользователь может **вводить простые запросы на основе естественного языка**. Например, пользователь может напечатать "Я хочу пиццу пепперони" или "Есть ли какие-нибудь вегетарианские рестораны в 3 милях от моего дома, открытые сейчас?". API-интерфейсы распознавания естественного языка, такие как [LUIS.ai](https://www.luis.ai), отлично подходят для таких сценариев. 

Используя API-интерфейсы, ваш бот может извлечь ключевые компоненты текста пользователя, чтобы определить его намерение. При реализации возможностей распознавания естественного языка в своем боте подойдите реалистично к возможному уровню детализации входных данных пользователей. 

![Взаимодействие пользователей](~/media/bot-service-design-user-experience/buy-house.png)

> [!TIP]
> При создании моделей естественного языка не предполагайте, что пользователи предоставят всю необходимую информацию в первоначальном запросе. Проектируйте бот так, чтобы он запрашивал требуемую информацию, направляя пользователя для ее предоставления, задав ряд вопросов, если это необходимо. 

  
## <a name="speech"></a>Речь

Бот может использовать **речевое** средство ввода и/или вывода для обмена данными с пользователями. Если бот предназначен для поддержки устройств без клавиатуры или монитора, речь является единственным средством общения с пользователем. 

## <a name="choosing-between-rich-user-controls-text-and-natural-language-and-speech"></a>Выбор между функциональными пользовательскими элементами управления, текстом, естественным языком и речью

Подобно тому как люди общаются друг с другом, используя комбинацию жестов, голоса и символов, боты могут общаться с пользователями, используя сочетание функциональных пользовательских элементов управления, текст (иногда включающий естественный язык) и речь. Эти методы коммуникации могут использоваться вместе, и вам не нужно выбирать тот или иной. 

Например, представьте себе "кулинарный бот", который помогает пользователям с рецептами, и может предоставлять инструкции, воспроизводя видео или отображая серию снимков, чтобы объяснить, что нужно сделать. Некоторые пользователи предпочитают перелистывать страницы рецепта или задавать вопросы боту, используя речь, когда они готовят блюдо по рецепту. Другие могут предпочесть касаться экрана устройства, а не взаимодействовать с ботом с помощью речи. При разработке своего бота включите элементы пользовательского интерфейса, поддерживающие способы, с помощью которых пользователи, скорее всего, будут взаимодействовать с вашим ботом, учитывая конкретные варианты использования, для которых предназначен бот. 


