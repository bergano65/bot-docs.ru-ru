---
title: Подключение бота к Кортане| Документация Майкрософт
description: Сведения о настройке бота для доступа через интерфейс Кортаны.
keywords: cortana, bot channel, configure cortana
author: RobStand
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.subservice: sdk
ms.date: 04/30/2018
ms.openlocfilehash: 9e3f2f19c480a9d2fe6df0baea74d449bb584b4f
ms.sourcegitcommit: b78fe3d8dd604c4f7233740658a229e85b8535dd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2018
ms.locfileid: "49999093"
---
# <a name="connect-a-bot-to-cortana"></a>Подключение бота к Кортане

Кортана — это канал с поддержкой речи, который может отправлять и принимать голосовые сообщения в дополнение к текстовой беседе. Бот, предназначенный для подключения к Кортане, должен быть разработан как для речи, так и для текстовых сообщений. *Навык* Кортаны представляет собой бот, который можно вызвать с помощью клиента Кортаны. При публикации бот добавляется в список доступных навыков.

Чтобы добавить канал Кортаны, откройте бот на [портале Azure](https://portal.azure.com/), щелкните колонку **Каналы** и выберите **Кортана**.

![Добавления канала Кортаны](~/media/channels/cortana-addchannel.png)

## <a name="configure-cortana"></a>Настройка Кортаны

При подключении бота к каналу Кортаны основная информация о вашем боте будет предварительно заполнена в регистрационной форме. Внимательно просмотрите эту информацию. Форма состоит из следующих полей.

| Поле | ОПИСАНИЕ |
|------|------|
| **Значок навыков** | Значок, который отображается на холсте Кортаны при вызове вашего навыка. Он также используется, когда навыки доступны для поиска (например, в магазине Microsoft). (Максимальный размер: 32 КБ, только PNG).|
| **Отображаемое имя** | Имя навыка Кортаны отображается в верхней части визуального интерфейса. (Допустимое число символов: 30) |
| **Имя вызова** | Это имя, которое пользователи называют при вызове навыка. Оно должно состоять из трех слов максимум и легко произноситься. Сведения о выборе этого имени см. в статье [Invocation name guidelines][invocation] (Руководство по именам для вызова).|

![Параметры по умолчанию](~/media/channels/cortana-defaultsettings.png)

## <a name="general-bot-information"></a>Общие сведения о боте

В разделе **Manage user identity through connected services** (Управление удостоверением пользователя через подключенные службы) выберите параметр, чтобы включить его. Заполните форму.

Все поля со звездочкой (*) обязательные. Чтобы подключать бот к Cortana, его необходимо предварительно опубликовать в Azure.

![Управление удостоверениями пользователей, часть 1](~/media/channels/cortana-manageidentity-1.png)
![Управление удостоверениями пользователей, часть 2](~/media/channels/cortana-manageidentity-2.png)

### <a name="when-should-cortana-prompt-for-a-user-to-sign-in"></a>Когда Cortana будет запрашивать вход пользователя в систему

Выберите **Sign in at invocation** (Вход по вызову), если вы хотите, чтобы пользователь выполнял вход в Cortana во время вызова навыка.

Выберите **Sign in when required** (Вход при необходимости), если вы используете для входа пользователя карточку входа службы ботов. Этот вариант обычно применяется, когда пользователь должен входить в систему только для использования требующих авторизации функций. Когда ваш навык отправляет сообщение, содержащее в качестве вложения карточку для входа, Cortana игнорирует эту карточку и запускает поток авторизации с настройками, указанными в разделе "Подключение учетной записи".

### <a name="account-name"></a>Имя учетной записи

Имя навыка, которое отображается, когда пользователь выполнит вход в навык.

### <a name="client-id-for-third-party-services"></a>Client ID for third-party services (Идентификатор клиента для сторонних служб)

Идентификатор приложения вашего бота. Вы получили идентификатор при регистрации бота.

### <a name="space-separated-list-of-scopes"></a>Space-separated list of scopes (Список областей с разделителями-пробелами)

Укажите области, требуемые службой (см. документацию службы).

### <a name="authorization-url"></a>URL-адрес авторизации

Задайте значение `https://login.microsoftonline.com/common/oauth2/v2.0/authorize`.

### <a name="token-options"></a>Параметры токена

Выберите **POST**.

### <a name="grant-type"></a>Тип предоставления разрешения

Выберите **Код авторизации**, чтобы применить поток предоставления кода, или **Неявный**, чтобы использовать неявный поток.

### <a name="token-url"></a>URL-адрес токена

Для **кода авторизации** укажите тип предоставления разрешения `https://login.microsoftonline.com/common/oauth2/v2.0/token`.

### <a name="client-secretpassword-for-third-party-services"></a>Client secret/password for third party services (Секрет/пароль клиента для сторонних служб)

Пароль бота. Вы получили пароль при регистрации бота.

### <a name="client-authentication-scheme"></a>Client authentication scheme (Схема проверки подлинности клиента)

Выберите **HTTP Basic**.

### <a name="internet-access-required-to-authenticate-users"></a>Internet access required to authenticate users (Для аутентификации пользователей требуется доступ в Интернет)

Не устанавливайте этот флажок.

### <a name="request-user-profile-data-optional"></a>Запрос данных профиля пользователя (необязательно)

Кортана предоставляет доступ к нескольким различным типам данных профиля пользователя, которые вы можете использовать при настройке бота для пользователя. Например, если навык имеет доступ к имени и местоположению пользователя, тогда у него может быть настраиваемый ответ, например "Здравствуйте, Петр, надеюсь, вы хорошо проводите время в Бельвью, штат Вашингтон".

Щелкните ссылку **Add a user profile request** (Добавить запрос профиля пользователя), затем в раскрывающемся списке выберите нужные сведения о профиле пользователя. Добавьте понятное имя для доступа к этим сведениям из кода своего бота.

### <a name="deploy-on-cortana"></a>Развертывание на Cortana

Когда вы закончите заполнять регистрационную форму для навыка Cortana, щелкните **Deploy on Cortana** (Развернуть на Cortana), чтобы завершить подключение. Вы вернетесь к колонке каналов бота, где сможете проверить, подключен ли он теперь к Кортане.

На этом этапе ваш бот уже развернут в вашей учетной записи как навык Cortana.

## <a name="next-steps"></a>Дополнительная информация

* [Cortana Skills Kit](https://aka.ms/CortanaSkillsDocs) (Набор навыков Кортаны)
* [Тестирование навыка Кортаны](bot-service-debug-cortana-skill.md)
* [Publishing Cortana Skills][publish] (Публикация навыков Кортаны)

[invocation]: https://docs.microsoft.com/en-us/cortana/skills/cortana-invocation-guidelines
[publish]: https://docs.microsoft.com/en-us/cortana/skills/publish-skill
[connected]: https://aka.ms/CortanaSkillsBotConnectedAccount
[CortanaEntity]: https://aka.ms/lgvcto
