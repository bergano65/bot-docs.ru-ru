---
title: Часто задаваемые вопросы о службе Bot
description: Список часто задаваемых вопросов об элементах Bot Framework, а также информация о том, когда будут доступны новые функции.
author: scheyal
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.date: 02/19/2020
ms.openlocfilehash: d7e667724250d3307a53cf41dc671db788c347bc
ms.sourcegitcommit: 54d3febefaf0072172b17bd8e4ec456264dfbd42
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "77521408"
---
# <a name="bot-framework-frequently-asked-questions"></a>Часто задаваемые вопросы о Bot Framework

В этой статье приведены ответы на некоторые часто задаваемые вопросы о Bot Framework.

## <a name="background-and-availability"></a>Общие сведения и доступность

### <a name="why-did-microsoft-develop-the-bot-framework"></a>Почему корпорация Майкрософт разработала Bot Framework?

Мы создали Bot Framework, чтобы разработчикам было проще создавать полезные боты и подключать к ним пользователей везде, где требуется такое взаимодействие, в том числе на главных каналах Майкрософт.

### <a name="what-is-the-v4-sdk"></a>Что такое пакет SDK версии 4?
Пакет SDK Bot Framework версии 4 создавался с учетом отзывов и результатов использования предыдущих пакетов SDK Bot Framework. В нем представлен необходимый уровень абстракции. Кроме того, он обеспечивает широкие возможности компонентизации элементов бота. Вы можете начать с простого бота и усложнять его с помощью модульной расширяемой платформы. [Часто задаваемые вопросы о](https://github.com/Microsoft/botbuilder-dotnet/wiki/FAQ) пакете SDK можно найти на сайте GitHub.

### <a name="running-a-bot-offline"></a>Запуск бота в автономном режиме

<!-- WIP -->
Прежде чем перейти к использованию бота в автономном режиме (что означает, что бот развернут не в Azure или других службах узла, а в локальной среде), давайте проясним некоторые моменты.

- Бот — это веб-служба без пользовательского интерфейса, для взаимодействия с которой пользователю нужны другие средства, т. е. каналы, которые используют [Bot Framework Service](rest-api/bot-framework-rest-connector-concepts.md). Соединитель работает в качестве *прокси-сервера* для ретрансляции сообщений между клиентом и ботом.
- **Соединитель** — это глобальное приложение, размещенное в узлах Azure и распределенное географически для обеспечения доступности и масштабируемости. 
- Зарегистрируйте бота для работы с соединителем с помощью колонки [регистрации канала бота](bot-service-quickstart-registration.md).
    >[!NOTE]
    > Конечная точка бота должна быть общедоступной для соединителя.

Вы можете запустить бота в автономном режиме с ограниченными возможностями. Например, если вы хотите использовать бота в автономном режиме с возможностью LUIS, создайте контейнер для бота, а также необходимые инструменты и контейнер для LUIS. Оба контейнера подключены через промежуточную сеть Docker Compose.

Это частично автономное решение, так как контейнеру Cognitive Services периодически требуется подключение к сети.

> [!NOTE]
> При работе в автономном режиме бот не поддерживает службу QnA.

Дополнительные сведения см. в разделе:

- [Deploy the Language Understanding (LUIS) container to Azure Container Instances](https://docs.microsoft.com/azure/cognitive-services/luis/deploy-luis-on-container-instances) (Развертывание контейнера Распознавания речи (LUIS) в службе "Экземпляры контейнеров Azure")
- [Container support in Azure Cognitive Services](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-container-support) (Поддержка контейнеров в Azure Cognitive Services)

## <a name="bot-framework-sdk-version-3-lifetime-support-and-deprecation-notice"></a>Поддержка жизненного цикла SDK Bot Framework версии 3 и уведомление о прекращении использования
Пакет SDK для Microsoft Bot Framework версии 4 был выпущен в сентябре 2018, после чего были опубликованы несколько выпусков с исправлениями и улучшениями. Как было объявлено ранее, мы прекращаем поддержку пакета SDK версии 3. Соответственно, прекращается и разработка в репозиториях для версии 3. **Существующие рабочие нагрузки ботов для версии 3 продолжат работу без прерываний. Мы не планируем вмешиваться в выполнение таких рабочих нагрузок**.

Как уже упоминалось, боты на основе SDK Bot Builder версии 3 будут и далее работать и поддерживаться службой Azure Bot. Поддержка пакета SDK Bot Builder версии 3 ограничится критическими исправлениями ошибок безопасности и обновлениями совместимости уровней соединителя и протокола.  

Все новые функции и возможности разрабатываются исключительно для [SDK Bot Framework версии 4](https://github.com/microsoft/botframework-sdk).  Мы рекомендуем всем пользователям как можно скорее перенести все боты на версию 4.

Настоятельно рекомендуем начать перенос ботов с версии 3 в версию 4. Чтобы упростить этот перенос, мы подготовили документацию по миграции и окажем расширенную поддержку инициативам по переносу (через такие стандартные каналы, как Stack Overflow и Служба поддержки пользователей Майкрософт).


Чтобы получить дополнительные сведения, перейдите по указанным ниже ссылкам.
* [Основные рекомендации по миграции](https://aka.ms/bf-migration-overview)
* Основные репозитории версии 4 для разработки ботов на Bot Framework
  * [Botbuilder для .NET](https://github.com/microsoft/botbuilder-dotnet)
  * [Botbuilder для JS](https://github.com/microsoft/botbuilder-js) 
* Библиотеки QnA Maker заменены следующими библиотеками версии 4:
  * [Библиотеки для .NET](https://github.com/Microsoft/botbuilder-dotnet/tree/master/libraries/Microsoft.Bot.Builder.AI.QnA)
  * [Библиотеки для JS](https://github.com/Microsoft/botbuilder-js/blob/master/libraries/botbuilder-ai/src/qnaMaker.ts)
* Библиотеки Azure заменены следующими библиотеками версии 4:
  * [Botbuilder для JS Azure](https://github.com/Microsoft/botbuilder-js/tree/master/libraries/botbuilder-azure)
  * [Botbuilder для .NET Azure](https://github.com/Microsoft/botbuilder-dotnet/tree/master/libraries/Microsoft.Bot.Builder.Azure)

### <a name="v3-status-summary"></a>Сводка состояния для версии 3

#### <a name="abs-service"></a>Служба Azure Bot
1.  На стороне службы Azure Bot сохраняется поддержка выполняемых ботов версии 3, и мы не планируем завершать срок их службы или препятствовать выполнению существующих ботов. 
2.  Для каналов сохранится совместимость с версией 3 без перерывов в работе. Завершение их срока службы не планируется.
3.  Создание новых ботов версии 3 на портале теперь невозможно, но опытные пользователи смогут развернуть бот версии 3 в другом расположении за пределами Azure Bot (например, в качестве службы веб-приложения).

#### <a name="sdk-and-tools"></a>Пакет SDK и средства
1.  Мы прекращаем развитие пакета SDK версии 3. В обозримом будущем для ветвей пакета SDK появятся лишь критические исправления безопасности (с одним исключением: мы планируем добавить соединитель навыков, чтобы боты версии 4 могли взаимодействовать с ботам версии 3).
2.  Разработка пакетов SDK и средств будет выполняться исключительно для версии 4. Для версии 3 никаких работ не предусмотрено.
3.  Вы можете продолжить пользоваться устаревшими средства для управления ботами версии 3. 


## <a name="how-can-i-migrate-azure-bot-service-from-one-region-to-another"></a>Как перенести службу Azure Bot из одного региона в другой?

Служба Azure Bot не поддерживает перемещение между регионами. Это глобальная служба, не привязанная ни к одному конкретному региону.

## <a name="channels"></a>Каналы
### <a name="when-will-you-add-more-conversation-experiences-to-the-bot-framework"></a>Когда добавятся дополнительные возможности общения для Bot Framework?

Мы планируем непрерывное усовершенствование Bot Framework, включая дополнительные каналы, но в данный момент точного расписания еще нет.  
Если вы хотите добавить на платформу конкретный канал, [сообщите нам][Support].

### <a name="i-have-a-communication-channel-id-like-to-be-configurable-with-bot-framework-can-i-work-with-microsoft-to-do-that"></a>У меня есть коммуникационный канал, в который следует добавить возможность настройки с помощью Bot Framework. Могу ли я обратиться в корпорацию Майкрософт, чтобы сделать это?

Мы не предоставляем общий механизм добавления новых каналов в Bot Framework для разработчиков, но вы можете подключить бот к приложению с помощью [Direct Line API][DirectLineAPI]. Если вы являетесь разработчиком коммуникационного канала и хотите работать с нами, чтобы включить свой канал в Bot Framework, [мы с радостью поможем вам][Support].

### <a name="if-i-want-to-create-a-bot-for-microsoft-teams-what-tools-and-services-should-i-use"></a>Если требуется создать бот для Microsoft Teams, какие инструменты и службы следует использовать?

Bot Framework предназначен для создания, подключения и развертывания высококачественных, быстрых, высокопроизводительных и масштабируемых ботов для Teams и многих других каналов. Пакет SDK можно применять для создания ботов, которые взаимодействуют с пользователями с использованием текста или SMS, изображений, кнопок и карточек (они составляют большинство взаимодействий бота при общении), а также для создания взаимодействий ботов для Teams формата аудио и видео.

Если у вас уже есть хороший бот, который вы намерены вывести в Teams, его можно легко подключить к этому или любому другому поддерживаемому каналу с помощью Bot Framework для REST API (если для него существует доступная через Интернет конечная точка REST).

### <a name="how-do-i-create-a-bot-that-uses-the-us-government-data-center"></a>Как создать бот, использующий центр обработки данных для US Gov организаций?

Такой бот создается за два основных шага.
1. Добавьте в файл Appsettings.json (или параметры Службы приложений) параметр поставщика канала. Это необходимо сделать именно для такой константы "имя — значение": ChannelService = "https://botframework.azure.us". Ниже приведен пример использования Appsetting.json.

```json
{
  "MicrosoftAppId": "", 
  "MicrosoftAppPassword": "",
  "ChannelService": "https://botframework.azure.us"
}
```
2. Если вы используете .NET Core, необходимо будет добавить ConfigurationChannelProvider в файл Startup.cs. Способ добавления зависит от используемой версии пакета SDK.

- Для версии 4.3 и более поздних в методе ConfigureServices нужно создать экземпляр ConfigurationChannelProvider. Если используется класс BotFrameworkHttpAdapter, вставьте экземпляр в составе singleton в коллекцию службы таким образом:

```csharp  
services.AddSingleton<IChannelProvider, ConfigurationChannelProvider>();
```
- Если используете более раннюю версию .NET Core, в методе ConfigureServices найдите метод AddBot. При установке параметров обязательно добавьте следующее:

```csharp
options.ChannelProvider = new ConfigurationChannelProvider();
```
Дополнительные сведения, касающиеся государственных служб, см. [здесь](https://docs.microsoft.com/azure/azure-government/documentation-government-services-aiandcognitiveservices#azure-bot-service).

## <a name="security-and-privacy"></a>Безопасность и конфиденциальность
### <a name="do-the-bots-registered-with-the-bot-framework-collect-personal-information-if-yes-how-can-i-be-sure-the-data-is-safe-and-secure-what-about-privacy"></a>Собирают ли боты, зарегистрированные в Bot Framework, личную информацию? Если да, то как можно убедиться в том, что данные сохранены надежно и безопасно? Как насчет конфиденциальности?

Каждый бот имеет собственную службу, и разработчики этих служб обязаны предоставлять условия обслуживания и заявление о конфиденциальности в соответствии с правилами поведения разработчиков. См. руководство по [программированию ботов](https://docs.microsoft.com/azure/bot-service/bot-service-review-guidelines?view=azure-bot-service-4.0).

### <a name="can-i-host-my-bot-on-my-own-servers"></a>Могу ли я разместить бот на своих серверах?
Да. Вы можете разместить свой бот в любом расположении в Интернете. Это можно сделать на своих серверах, а также в Azure или любом другом центре обработки данных. Нужно только, чтобы бот предоставлял общедоступную конечную точку HTTPS.

### <a name="how-do-you-ban-or-remove-bots-from-the-service"></a>Как вы блокируете или удаляете боты из службы?

Пользователи могут сообщить о некорректно работающем боте с помощью карточки контакта бота в каталоге. Разработчики должны соблюдать условия предоставления услуг Майкрософт, чтобы участвовать в предоставлении службы.

### <a name="which-specific-urls-do-i-need-to-whitelist-in-my-corporate-firewall-to-access-bot-framework-services"></a>Какие именно URL-адреса нужно добавить в список разрешений в моем корпоративном брандмауэре для доступа к службам Bot Framework?
При наличии брандмауэра, который блокирует исходящий трафик, перенаправляемый от бота в Интернет, нужно добавить в список разрешений этого брандмауэра следующие URL-адреса:
- login.botframework.com (проверка подлинности бота);
- login.microsoftonline.com (проверка подлинности бота);
- westus.api.cognitive.microsoft.com (для интеграции Luis.ai NLP);
- state.botframework.com (хранилище состояний бота для создания прототипов);
- cortanabfchanneleastus.azurewebsites.net (канал Кортаны);
- cortanabfchannelwestus.azurewebsites.net (канал Кортаны);
- *.botFramework.com (каналы).
- Дополнительные URL-адреса для конкретных каналов Bot Framework

> [!NOTE] 
> Если вы не хотите добавлять URL-адрес в список разрешений с помощью звездочки, используйте `<channel>.botframework.com`. `<channel>` равен любому каналу, используемому вашим ботом, например `directline.botframework.com`, `webchat.botframework.com` и `slack.botframework.com`. Кроме того, при тестировании бота важно наблюдать за трафиком, поступающим в брандмауэр, проверяя, чтобы ничего лишнего не было заблокировано.

### <a name="can-i-block-all-traffic-to-my-bot-except-traffic-from-the-bot-framework-service"></a>Можно ли заблокировать весь входящий трафик бота, кроме трафика от Bot Framework Service?
Службы Bot Framework Service размещаются в центрах обработки данных Azure по всему миру, а список IP-адресов Azure постоянно меняется. Добавление в список разрешений определенных IP-адресов будет эффективно только на один день, так как IP-адреса Azure меняются.
 
### <a name="which-rbac-role-is-required-to-create-and-deploy-a-bot"></a>Какая роль RBAC нужна для создания и развертывания бота?

Для создания бота на портала Azure требуется доступ уровня участника в подписке или соответствующей группе ресурсов. Пользователь с ролью *Участник* в группе ресурсов может создавать боты только в этой конкретной группе ресурсов. Пользователь с ролью *Участник* в подписке может создать боты в любой существующей или новой группе ресурсов.

Управление доступом на основе ролей при работе с Azure CLI может поддерживать пользовательские роли. Если вы хотите создать пользовательскую роль с расширенными ограничениями, укажите следующий набор разрешений, чтобы пользователь мог создавать и развертывать боты с поддержкой LUIS, QnA Maker и Application Insights.

  "Microsoft.Web/ *", "Microsoft.BotService/* ", "Microsoft.Storage/ *", "Microsoft.Resources/deployments/* ", "Microsoft.CognitiveServices/ *", "Microsoft.Search/searchServices/* ", "Microsoft.Insights/ *", "Microsoft.Insights/components/* "

Для LUIS и QnA Maker требуются разрешения Cognitive Services. Для QnA Maker также требуются разрешения на поиск. При создании пользовательской роли важно учитывать, что все наследуемые *запреты* более приоритетны, чем настроенные в роли *разрешения*.
 
### <a name="what-keeps-my-bot-secure-from-clients-impersonating-the-bot-framework-service"></a>Какие есть способы защиты от клиентов, олицетворяющих Bot Framework Service?
1. Все подлинные запросы Bot Framework сопровождаются маркером JWT, криптографическую подпись которого можно проверить, следуя инструкциям по [проверке подлинности](https://docs.microsoft.com/azure/bot-service/rest-api/bot-framework-rest-connector-authentication?view=azure-bot-service-3.0#bot-to-connector). Этот маркер разработан таким образом, что злоумышленники не могут олицетворять доверенные службы.

2. Маркер безопасности, который указан в каждом запросе к боту содержит закодированный URL-адрес службы (ServiceUrl). Это означает, что даже если злоумышленник получит доступ к маркеру, он не сможет перенаправить диалог на новый URL-адрес службы. Это реализовано во всех пакетах SDK и описано в наших [справочных материалах по аутентификации](https://docs.microsoft.com/azure/bot-service/rest-api/bot-framework-rest-connector-authentication?view=azure-bot-service-3.0#bot-to-connector).

3. Если входящий маркер отсутствует или имеет неправильный формат, пакет SDK для Bot Framework не создаст маркер в ответ. Это позволяет ограничить ущерб, если бот настроен неправильно.
4. В боте вы можете вручную проверить, указан ли параметр ServiceUrl в маркере. В результате бот станет более уязвимым, если топология службы изменится. То есть это возможно, но не рекомендуется.


Обратите внимание, что это касается исходящих подключений к Интернету из бота. Списка IP-адресов или DNS-имен, которые служба Bot Framework Connector будет использовать для обращения к боту, нет. Добавление IP-адресов в список разрешений не поддерживается.

## <a name="rate-limiting"></a>Ограничение частоты
### <a name="what-is-rate-limiting"></a>Что являет собой ограничения частоты?
Служба Bot Framework должна защищать себя и своих клиентов от вредоносных вызов (например, атака типа "отказ в обслуживании"), чтобы ни один бот не мог отрицательно повлиять на производительность других ботов. Чтобы обеспечить такую защиту, мы реализовали в наших конечных точках механизм ограничения частоты (также известный как регулирование). Применяя это ограничение частоты, мы можем ограничить количество вызовов от определенного клиента или бота. Например, если с включенным ограничением частоты бот захотел опубликовать большое количество действий, ему пришлось бы исключить их в течение определенного периода времени. Обратите внимание, что целью ограничения скорости не является ограничение общего объема для бота. Оно предназначено для предотвращения злоупотребления диалоговой инфраструктурой, которая не соответствует шаблонам человеческих бесед. Например, если в двух беседах создается больше содержимого, чем физически способны прочитать два человека.

### <a name="how-will-i-know-if-im-impacted"></a>Как узнать, затрагивает ли это меня?
Вряд ли вы испытаете ограничение скорости, даже при большом объеме. Большинство ограничений частоты будет возникать только из-за массовой отправки действий (от бота или от клиента), максимального нагрузочного тестирования или ошибки. Когда запрос регулируется, возвращается ответ HTTP 429 (слишком много запросов) вместе с заголовком Retry-After, указывающим время ожидания (в секундах) до повторной попытки запроса. Вы можете собирать эту информацию, включив аналитику для своего бота с помощью Azure Application Insights. Или вы можете добавить код в бот для записи сообщений. 

### <a name="how-does-rate-limiting-occur"></a>Как возникает ограничение частоты?
Это может произойти, если:
-   бот отправляет сообщения слишком часто;
-   клиент бота отправляет сообщения слишком часто;
-   клиент Direct Line запрашивает новый веб-сокет слишком часто;

### <a name="what-are-the-rate-limits"></a>Каковы ограничения частоты?
Мы постоянно настраиваем ограничения частоты, чтобы сделать их настолько "щадящими", насколько это возможно, в то же время защищая службы и пользователей. Так как пороговые значения будут иногда меняться, мы не публикуем их. Если вас затронули ограничения частоты, вы можете связаться с нами по адресу [bf-reports@microsoft.com](mailto://bf-reports@microsoft.com).

## <a name="bot-framework-sdk"></a>Пакет SDK Bot Framework
## <a name="why-doesnt-the-typing-activity-do-anything"></a>Почему действие ввода с клавиатуры не дает никаких результатов?
Некоторые каналы не поддерживают временные обновления ввода с клавиатуры.

## <a name="what-is-the-difference-between-the-connector-library-and-builder-library-in-the-sdk"></a>Чем отличается библиотека соединителя от библиотеки построителя в пакете SDK?

Библиотека соединителя является представлением REST API. Библиотека построителя добавляет модель программирования диалогов и другие функции и компоненты, такие как запросы, каскадные модели, цепочки и управляемое заполнение форм. Библиотека построителя также предоставляет доступ к Cognitive Services, например LUIS.

## <a name="how-do-user-messages-relate-to-https-method-calls"></a>Каким образом сообщения пользователя связаны с вызовами методов HTTPS?

Когда пользователь отправляет сообщение по каналу, веб-служба Bot Framework отправляет запрос HTTPS POST в конечную точку веб-службы бота. По этому каналу бот может отправлять пользователю одно или много сообщений либо не отправлять ни одного, выполняя отдельный запрос HTTPS POST в Bot Framework для каждого отправляемого сообщения.


## <a name="how-can-i-intercept-all-messages-between-the-user-and-my-bot"></a>Каким образом можно перехватывать все сообщения между пользователем и моим ботом?

С помощью пакета SDK Bot Framework для .NET можно предоставлять реализации интерфейсов `IPostToBot` и `IBotToUser` для контейнера внедрения зависимостей `Autofac`. Для этой же цели можно использовать ПО промежуточного слоя из пакета SDK Bot Framework для любого языка. Репозиторий [BotBuilder-Azure](https://github.com/Microsoft/BotBuilder-Azure) содержит библиотеки C# и Node.js, которые будут регистрировать эти данные в таблице Azure.

## <a name="what-is-the-idialogstackforward-method-in-the-bot-framework-sdk-for-net"></a>Что собой представляет метод IDialogStack.Forward в пакете SDK Bot Framework для .NET?

Основная цель метода `IDialogStack.Forward` заключается в повторном использовании существующего дочернего диалога, который часто является реактивным, — дочерний диалог (в `IDialog.StartAsync`) ожидает объект `T` с обработчиком `ResumeAfter`. В частности, при наличии дочернего диалога, который ожидает `IMessageActivity` `T`, можно перенаправить входящий интерфейс `IMessageActivity` (уже полученный определенным родительским диалогом) с помощью метода `IDialogStack.Forward`. Например, чтобы перенаправлять входящий интерфейс `IMessageActivity` в `LuisDialog`, вызовите `IDialogStack.Forward` для отправки `LuisDialog` в стек диалога, выполните код в `LuisDialog.StartAsync` до его планирования ожидания следующего сообщения и затем сразу же удовлетворите это ожидание с помощью перенаправленного интерфейса `IMessageActivity`.

Как правило, объект `T` является интерфейсом `IMessageActivity`, так как для ожидания этого типа действия обычно создается `IDialog.StartAsync`. Можно использовать `IDialogStack.Forward` в `LuisDialog` в качестве механизма для перехвата сообщений от пользователя для обработки перед пересылкой сообщения в существующий `LuisDialog`. Кроме того, для этой цели можно также использовать `DispatchDialog` с `ContinueToNextGroup`.

Обычно перенаправленный элемент находится в первом обработчике `ResumeAfter` (например, `LuisDialog.MessageReceived`), запланированном `StartAsync`.


## <a name="what-is-the-difference-between-proactive-and-reactive"></a>Какова разница между понятиями "упреждающий" и "реагирующий"?

С точки зрения бота "реагирующий" означает, что пользователь начинает диалог, отправляя сообщения боту, а бот реагирует, отвечая на это сообщение. Напротив, "упреждающий" означает, что бот начинает диалог, отправляя первое сообщение пользователю. Например, бот может отправить упреждающее сообщение, чтобы уведомить пользователя об окончании срока действия или возникновении события.

## <a name="how-can-i-send-proactive-messages-to-the-user"></a>Как отправить упреждающее сообщение пользователю?

Примеры отправки упреждающих сообщений см. на странице [примеров для Bot Framework Channel Emulator версии 4 на C#](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/16.proactive-messages) и [примеров для Bot Framework Channel Emulator версии 4 на Node.js](https://github.com/Microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/16.proactive-messages) в репозитории BotBuilder-Samples на сайте GitHub.

## <a name="how-can-i-reference-non-serializable-services-from-my-c-dialogs-in-sdk-v3"></a>Каким образом можно ссылаться на несериализуемые службы из диалогов C# в пакете SDK версии 3?

Есть несколько вариантов.

* Разрешить зависимость посредством `Autofac` и `FiberModule.Key_DoNotSerialize`. Это самое четкое решение.
* Использовать атрибуты [NonSerialized](https://msdn.microsoft.com/library/system.nonserializedattribute(v=vs.110).aspx) и [OnDeserialized](https://msdn.microsoft.com/library/system.runtime.serialization.ondeserializedattribute(v=vs.110).aspx) для восстановления зависимости во время десериализации. Это самое простое решение.
* Не сохранять эту зависимость, чтобы исключить ее сериализуемость. Хотя это решение технически выполнимо, применять его не рекомендуется.
* Использование суррогата сериализации на основе отражения. В некоторых случаях это решение может быть нецелесообразным. Кроме того, слишком высоки риски сериализации.

## <a name="what-is-an-etag--how-does-it-relate-to-bot-data-bag-storage"></a>Что такое ETag?  Как он связан с хранилищем набора данных бота?

[ETag](https://en.wikipedia.org/wiki/HTTP_ETag) — это механизм для [управления оптимистичным параллелизмом](https://en.wikipedia.org/wiki/Optimistic_concurrency_control). Хранилище набора данных бота использует теги ETag для предотвращения применения конфликтующих обновлений к данным. Ошибка ETag с кодом состояния HTTP 412 — Precondition Failed (необходимое условие не выполнено) означает, что одновременно получены несколько сообщений, когда бот еще не успел завершить первую операцию.

Состояние и стек диалога хранятся в наборах данных бота. Например, ошибка ETag "Необходимое условие не выполнено" может возникнуть, если при получении нового сообщения для этого диалога бот все еще обрабатывает предыдущее сообщение.

## <a name="what-are-the-possible-machine-readable-resolutions-of-the-luis-built-in-date-time-duration-and-set-entities"></a>Какие возможные обрабатываемые компьютером решения существуют для встроенных сущностей даты, времени, длительности и установки в службе LUIS?

См. список примеров в описании [предварительно созданных сущностей][LUISPreBuiltEntities] в документации по LUIS.

## <a name="how-can-i-use-more-than-the-maximum-number-of-luis-intents"></a>Что можно сделать, если требуемое количество намерений LUIS превышает максимально допустимое значение?

Возможно, потребуется разделить модель и вызывать службу LUIS циклами или параллельно.

## <a name="how-can-i-use-more-than-one-luis-model"></a>Каким образом можно использовать несколько моделей LUIS?

Пакет SDK Bot Framework для Node.js и пакет SDK Bot Framework для .NET позволяют вызывать несколько моделей LUIS из одного диалога намерений LUIS. Учитывайте следующие моменты.

* При использовании нескольких моделей LUIS предполагается, что модели LUIS имеют неперекрывающийся набор намерений.
* При использовании нескольких моделей LUIS предполагается, что оценки из различных моделей являются сопоставимыми, и это необходимо учитывать при выборе максимально подходящего намерения в нескольких моделях.
* Использование нескольких моделей LUIS означает, что если намерение соответствует одной модели, оно будет также строго соответствовать намерению "None" других моделей. Можно избежать выбора намерения "None" в этой ситуации — пакет SDK Bot Framework для Node.js будет автоматически снижать оценку для намерений "None".

## <a name="where-can-i-get-more-help-on-luis"></a>Где можно получить дополнительную помощь по LUIS?

* [Общие сведения о службе "Распознавание речи" (LUIS) — Microsoft Cognitive Services](https://www.youtube.com/watch?v=jWeLajon9M8) (видео)
* [Расширенный сеанс обучения по службе "Распознавание речи" (LUIS)](https://www.youtube.com/watch?v=39L0Gv2EcSk) (видео)
* [Документация по LUIS](/azure/cognitive-services/LUIS/Home)
* [Форум по службе "Распознавание речи"](https://social.msdn.microsoft.com/forums/azure/home?forum=LUIS) 


## <a name="what-are-some-community-authored-dialogs"></a>Какие диалоги входят в число созданных сообществом?

* [BotAuth](https://www.nuget.org/packages/BotAuth) — проверка подлинности Azure Active Directory
* [BestMatchDialog](http://www.garypretty.co.uk/2016/08/01/bestmatchdialog-for-microsoft-bot-framework-now-available-via-nuget/) — регулярная основанная на выражениях отправка текста пользователя в методы диалогов

## <a name="what-are-some-community-authored-templates"></a>Какие шаблоны входят в число созданных сообществом?

* [ES6 BotBuilder](https://github.com/brene/botbuilder-es6-template) — шаблон ES6 Bot Builder

## <a name="related-services"></a>Связанные службы
### <a name="how-does-the-bot-framework-relate-to-cognitive-services"></a>Как Bot Framework связан с Cognitive Services?

В основе Bot Framework и [Cognitive Services](https://www.microsoft.com/cognitive) лежат многолетние исследования и опыт применения в популярных продуктах корпорации Майкрософт. Эти возможности позволяют каждой организации работать с данными, а также пользоваться преимуществами облачных решений и аналитики для создания собственных интеллектуальных систем, которые открывают новые возможности, ускоряют развитие бизнеса и лидируют в сферах, связанных с обслуживанием клиентов.

### <a name="what-is-the-direct-line-channel"></a>Что такое канал Direct Line?

Direct Line — это REST API, который позволяет добавить бот в службу, мобильное приложение или на веб-страницу.

Вы можете писать клиент API для Direct Line на любом языке. Просто введите код для [протокола Direct Line][DirectLineAPI], создайте секрет на странице конфигурации Direct Line и поговорите со своим ботом, где бы ни находился ваш код.

Direct Line подходит для:

* мобильных приложений iOS, Android и Windows Phone и других;
* классических приложений Windows, OSX и других;
* веб-страниц, где нужно больше настроек, чем для [встраиваемого канала "Веб-чат"][WebChat];
* приложений для обмена данными между службами.


## <a name="app-registration"></a>Регистрация приложения

### <a name="i-need-to-manually-create-my-app-registration-how-do-i-create-my-own-app-registration"></a>Мне нужно вручную создать собственную регистрацию приложения. Как это сделать?

Создать другую регистрацию приложения будет необходимо в таких случаях:

- Вы создали бот на портале Bot Framework (например, https://dev.botframework.com/bots/new). 
- Вы не можете регистрировать приложения в своей организации, и требуется третья сторона, чтобы создать идентификатор приложения для бота, сборка которого выполняется.
- В других случаях, когда необходимо вручную создать свой идентификатор приложения (и пароль).

Чтобы создать другой идентификатор для приложения, выполните действия ниже.

1. Войдите в [учетную запись Azure](https://portal.azure.com). Если ее нет, вы можете [зарегистрироваться и получить бесплатную учетную запись](https://azure.microsoft.com/free/).
2. Перейдите к [колонке регистрации приложений](https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade) и на панели действий вверху нажмите кнопку **Новая регистрация**.

    ![новая регистрация](media/app-registration/new-registration.png)

3. Введите отображаемое имя для регистрации приложения в поле *Имя* и выберите тип среди поддерживаемых типов учетных записей. Это имя не должно совпадать с идентификатором бота.

    > [!IMPORTANT]
    > В разделе *Поддерживаемые типы учетных записей* установите переключатель *Учетные записи в любом каталоге организации и личные учетные записи Майкрософт (например, Skype, Xbox, Outlook.com)* . Если выбрать любой другой вариант, **бот станет непригодным для использования**.

    ![настройки регистрации](media/app-registration/registration-details.png)

4. Щелкните **Зарегистрировать**.

    Через несколько секунд в созданной регистрации приложения откроется колонка. Скопируйте данные в поле *Application (client) ID* (Идентификатор приложения (клиента)) в колонке "Обзор" и вставьте его в поле идентификатора приложения.

    ![идентификатор приложения](media/app-registration/app-id.png)

Если вы создаете бот на портале Bot Framework, то настройка регистрации приложения уже будет завершена. Секрет будет создан автоматически. 

Если вы создаете бот на портале Azure, для регистрации вашего приложения необходимо будет создать секрет. 

1. В колонке регистрации приложения в левой области навигации щелкните **Certificates & secrets** (Сертификаты и секреты).
2. В этой колонке нажмите кнопку **New client secret** (Создать секрет клиента). В открывшемся диалоговом окне введите описание (необязательно) и выберите вариант **Никогда** для переключателя "Истекает срок действия". 

    ![создание секрета](media/app-registration/new-secret.png)

3. Скопируйте значение секрета в таблице в разделе *Секреты клиента* и вставьте его в поле *Пароль* своего приложения, а затем нажмите кнопку **ОК** внизу этой колонки. Далее создайте бот. 

    > [!NOTE]
    > Секрет будет показан только в этой колонке, и вы не сможете получить его, если уйдете с этой страницы. Скопируйте его в безопасное место.

    ![создание идентификатора приложения](media/app-registration/create-app-id.png)


[DirectLineAPI]: https://docs.microsoft.com/azure/bot-service/rest-api/bot-framework-rest-direct-line-3-0-concepts
[Support]: bot-service-resources-links-help.md
[WebChat]: bot-service-channel-connect-webchat.md
