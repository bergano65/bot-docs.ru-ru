---
title: Создание службы "Регистрация каналов бота" с помощью службы Bot — Служба Azure Bot
description: Узнайте, как зарегистрировать имеющийся бот с помощью службы Bot.
ms.author: kamrani
manager: kamrani
ms.topic: conceptual
ms.service: bot-service
ms.date: 12/13/2017
monikerRange: azure-bot-service-3.0
ms.openlocfilehash: 4471507ff64e69ca2d438d55ccf8ba7e08fbcdfd
ms.sourcegitcommit: f8b5cc509a6351d3aae89bc146eaabead973de97
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/09/2020
ms.locfileid: "75794729"
---
# <a name="register-a-bot-with-azure-bot-service"></a>Регистрация бота с помощью службы Azure Bot

В этом разделе показано, как создать ресурс **службы Azure Bot** для регистрации бота. Это необходимо, если бот размещен удаленно и вы хотите сделать его доступным в Azure с подключением к каналам службы Azure Bot.

Это позволит вам создавать, подключать и администрировать ботов для взаимодействия с пользователями через Кортану, Skype, Messenger и другие службы независимо от их расположения.

> [!IMPORTANT] 
> Бот нужно регистрировать, только если он не размещен в Azure. [Созданный](v4sdk/abs-quickstart.md) на портале Azure бот уже будет зарегистрирован в службе.

## <a name="create-a-registration-resource"></a>Создание ресурса регистрации

1. В браузере перейдите на [портал Azure](https://ms.portal.azure.com).

    > [!TIP]
    > Если у вас нет подписки, вы можете зарегистрироваться для получения <a href="https://azure.microsoft.com/free/" target="_blank">бесплатной учетной записи</a>.

1. В области слева щелкните **Создать ресурс**.
1. В поле выбора в правой панели введите *бот*. В раскрывающемся списке выберите **Регистрация каналов бота** или **Бот веб-приложения** (в зависимости от приложения).
Для **бота веб-приложения** выполните действия, приведенные в статье [Создание бота с помощью службы Azure Bot](v4sdk/abs-quickstart.md). Вы создадите бота в Azure, который автоматически регистрируется в службе Azure Bot.
1. Нажмите кнопку **Создать**, чтобы запустить процесс.
1. В колонке **Служба программ-роботов** укажите требуемую информацию о своем боте, как указано в таблице под изображением.  

   ![Колонка создания бота регистрации](media/azure-bot-quickstarts/registration-create-bot-service-blade.png)

   |Параметр |Рекомендуемое значение|Description|
   |---|---|--|
   |**Имя бота** <img width="300px">|Отображаемое имя вашего бота|Отображаемое имя бота, которое показывается на каналах и в каталогах. Это имя можно изменить в любое время.|
   |**подписка**|Ваша подписка|Выберите подписку Azure, которую нужно использовать.|
   |**Группа ресурсов**|myResourceGroup|Вы можете создать [группу ресурсов](/azure/azure-resource-manager/resource-group-overview#resource-groups) или выбрать имеющуюся.|
   |**Местоположение**|Запад США|Выберите расположение, ближайшее к расположению развертывания бота, или расположение рядом с другими службами, к которым бот будет обращаться.|
   |**Ценовая категория**|F0|Выберите ценовую категорию. Вы можете обновить ценовую категорию в любое время. Дополнительные сведения см. на странице [цен на службу Bot](https://azure.microsoft.com/pricing/details/bot-service/).|
   |**Messaging endpoint** (Конечная точка обмена сообщениями)|URL-адрес|Введите URL-адрес конечной точки обмена сообщениями своего бота.|
   |**Application Insights**|С| Решите, хотите ли вы **включить** или **выключить** [Application Insights](bot-service-manage-analytics.md). Если вы выберете параметр **Вкл.** , необходимо также указать региональное расположение. |
   |**Microsoft App ID and password** (Идентификатор и пароль приложения Майкрософт)| Auto create App ID and password (Автоматическое создание идентификатора и пароля приложения) |Используйте этот параметр, если вам нужно вручную ввести идентификатор и пароль приложения Майкрософт. Подробные сведения см. в следующем разделе [Регистрация приложений вручную](#manual-app-registration). В противном случае новый идентификатор приложения Майкрософт и пароль будут созданы в ходе регистрации. |

    > [!IMPORTANT]
    > Обязательно введите URL-адрес конечной точки обмена сообщениями своего бота.

1. Нажмите кнопку **Создать** . Дождитесь, пока завершится создание ресурса. Он отобразится в списке ресурсов.

### <a name="get-registration-password"></a>Получение пароля для регистрации

После завершения регистрации Azure Active Directory назначит уникальный идентификатор приложения для регистрации, и вы перейдете на страницу приложения *Обзор*.

Чтобы получить пароль, выполните приведенные далее действия.

1. В списке ресурсов щелкните только что созданный ресурс Службы приложений Azure.
1. Справа в колонке ресурсов щелкните **Параметры**. Откроется страница ресурса *Параметры*.
1. На странице параметров скопируйте созданный **идентификатор приложения Майкрософт** и сохраните его в файле.
1. Щелкните ссылку **Управление** рядом с *идентификатором приложения Майкрософт*.

    ![Колонка создания бота регистрации](media/azure-bot-quickstarts/bot-channels-registration-app-settings.png)

1. На странице *Сертификаты и секреты* нажмите кнопку **Создать секрет клиента**.

    ![Колонка создания бота регистрации](media/azure-bot-quickstarts/bot-channels-registration-app-secrets.png)

1. Добавьте описание, выберите срок действия и нажмите кнопку **Добавить**.

    ![Колонка создания бота регистрации](media/azure-bot-quickstarts/bot-channels-registration-app-secrets-create.png)

    Будет создан пароль для вашего бота. Скопируйте этот пароль и сохраните его в файл. Вы сможете просмотреть этот пароль только в этот раз. Если вы не сохранили полный пароль, потребуется повторить процедуру, чтобы создать пароль, если он понадобится позже.

## <a name="manual-app-registration"></a>Регистрация приложений вручную

Регистрацию вручную необходимо выполнять в таких ситуациях:

- Вы не можете выполнить регистрацию в своей организации, и требуется третья сторона, чтобы создать идентификатор приложения для бота, сборка которого выполняется.
- Вам нужно вручную создать свой идентификатор приложения (и пароль).

Подробные сведения см. в разделе [Регистрация приложения](bot-service-resources-bot-framework-faq.md#app-registration).

> [!IMPORTANT]
> Как описано в разделе *Поддерживает типы учетных записей*, вам нужно выбрать один из двух мультитенантных типов: *Учетные записи в любом каталоге организации (любая служба Azure AD — мультитенантность)* или *Учетные записи в любом каталоге организации (любая служба Azure AD — мультитенантность) и личные учетные записи Майкрософт (например, Skype, Xbox, Outlook.com)* при создании приложения. В противном случае бот не будет работать. Подробные сведения см. в разделе [Регистрация нового приложения с помощью портала Azure](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-a-new-application-using-the-azure-portal).

## <a name="update-the-bot"></a>Обновление бота

Если вы используете пакет SDK Bot Framework для .NET, установите следующие важные значения в файле web.config:

- `MicrosoftAppId = <appId>`
- `MicrosoftAppPassword = <appSecret>`

Если вы используете пакет SDK Bot Framework для Node.js, задайте следующие переменные среды:

- `MICROSOFT_APP_ID = <appId>`
- `MICROSOFT_APP_PASSWORD = <appSecret>`

## <a name="test-the-bot"></a>Тестирование бота

После создания службы бота [проверьте ее в компоненте "Веб-чат"](bot-service-manage-test-webchat.md). Введите сообщение. Бот должен ответить.

## <a name="next-steps"></a>Дальнейшие действия

В этом разделе вы узнали, как зарегистрировать размещенный бот в службе Bot. Далее узнайте, как управлять службой Bot.

> [!div class="nextstepaction"]
> [Управление ботом](bot-service-manage-overview.md)
