---
title: Тестирование навыка Кортаны | Документация Майкрософт
description: Узнайте, как тестировать бот Кортаны путем вызова навыка Кортаны.
keywords: Пакет SDK Bot Framework, регистрация бота, Кортана
author: v-ducvo
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.service: bot-service
ms.date: 05/01/2018
monikerRange: azure-bot-service-3.0
ms.openlocfilehash: 996063bef2e139292187f125318f63745373e7bb
ms.sourcegitcommit: eacf1522d648338eebefe2cc5686c1f7866ec6a2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/30/2019
ms.locfileid: "70166946"
---
# <a name="test-a-cortana-skill"></a>Тестирование навыка Кортаны

[!INCLUDE [pre-release-label](includes/pre-release-label-v3.md)]
 
Если вы создали навык Кортаны с помощью пакета SDK Bot Framework, вы можете вызвать его из Кортаны для проверки работы. Приведенные ниже инструкции помогут выполнить шаги, необходимые для проверки навыка Кортаны.

## <a name="register-your-bot"></a>Регистрация бота
Если вы [создали бот](~/bot-service-quickstart.md) с помощью службы Bot в Azure, то бот уже будет зарегистрирован и этот шаг можно пропустить.

Если вы развернули бот в другом месте или хотите протестировать его локально, то необходимо [зарегистрировать](bot-service-quickstart-registration.md) бот таким образом, чтобы можно было подключить его к Кортане. Во время процесса регистрации необходимо указать **конечную точку обмена сообщениями** бота. Если вы решили протестировать бот локально, необходимо будет запустить программное обеспечение для туннелирования, такое как [ngrok](http://ngrok.com), чтобы получить конечную точку для локального бота.

## <a name="get-messaging-endpoint-using-ngrok"></a>Получение конечной точки обмена сообщениями с помощью ngrok

Если бот выполняется локально, вы можете получить конечную точку для тестирования, запустив программное обеспечение для туннелирования, например [ngrok](https://ngrok.com). При использовании ngrok для получения конечной точки в окне консоли введите следующее: 

```cmd
 ngrok.exe http 3979 -host-header="localhost:3979"
``` 

Так настраивается и отображается ссылка для переадресации ngrok, которая переадресовывает запросы к боту, работающему на порте 3978. URL-адрес в ссылке для переадресации должен выглядеть следующим образом: `https://0d6c4024.ngrok.io`.  Добавьте к ссылке `/api/messages`, чтобы сформировать URL-адрес конечной точки обмена сообщениями в таком формате: `https://0d6c4024.ngrok.io/api/messages`. 

Введите этот URL-адрес конечной точки в раздел **конфигурации** колонки [Параметры](~/bot-service-manage-settings.md) бота.

## <a name="enable-speech-recognition-priming"></a>Включение подготовки распознавания речи
Если ваш бот использует приложение "Распознавания речи" (LUIS), убедитесь, что вы связали идентификатор приложения LUIS с вашей зарегистрированной службой ботов. Это помогает боту распознавать разговорные фразы, которые определены в модели LUIS. Дополнительные сведения см. в статье [Подготовка речи](~/bot-service-manage-speech-priming.md).

## <a name="add-the-cortana-channel"></a>Добавления канала Кортаны
Чтобы добавить Кортану в качестве канала, выполните действия, описанные в статье [Подключение бота к Кортане](bot-service-channel-connect-cortana.md).

## <a name="test-using-web-chat-control"></a>Тестирование с помощью элемента управления "Веб-чат"

Для проверки бота с помощью встроенного элемента управления "Веб-чат" в службе Bot щелкните **Test in Web Chat** (Тестирование в веб-чате) и введите сообщение, чтобы убедиться, что ваш бот работает.

## <a name="test-using-emulator"></a>Тестирование с помощью эмулятора

Для тестирования бота с помощью [эмулятора](~/bot-service-debug-emulator.md) выполните следующие действия:

1. Запустите бот.
2. Откройте эмулятор и заполните необходимые сведения. Сведения о том, как найти значения **AppID** и **AppPassword** вашего бота, см. в разделе [MicrosoftAppID и MicrosoftAppPassword](bot-service-manage-overview.md#microsoftappid-and-microsoftapppassword). 
3. Щелкните **Подключиться** для подключения эмулятора к боту.
4. Введите сообщение, чтобы убедиться, что ваш бот работает.

## <a name="test-using-cortana"></a>Тестирование с помощью Кортаны
Вы можете вызвать навык Кортаны, говоря фразу вызова в Кортане. 
1. Откройте Кортану.
2. Откройте заметки Кортаны и нажмите кнопку **Обо мне** для отображения учетной записи, которая используется для Кортаны. Убедитесь, что вы вошли с той же учетной записи Майкрософт, которая использовалась для регистрации вашего бота. 
   ![Вход в заметки Кортаны](~/media/cortana/cortana-notebook.png)
2. Нажмите кнопку микрофона в приложении Кортаны или в поле поиска Windows "Спросите меня что-нибудь" и скажите [фразу вызова][InvocationNameGuidelines] бота. Фраза вызова содержит *имя вызова*, которое однозначно идентифицирует навык для вызова. Например, если имя вызова навыка "Фотография Northwind", то правильная фраза вызова может содержать: "Попроси фотографию Northwind..." или "Скажи фотографии Northwind...".

   Укажите *имя вызова* бота при его настройке для Кортаны.
   ![Введите имя вызова при настройке канала Кортаны](~/media/cortana/cortana-invocation-name-callout.png)

3. Если Кортана распознает фразу вызова, то бот запускается на холсте Кортаны. 

## <a name="troubleshoot"></a>Устранение неполадок

Если не удается запустить навык Кортаны, проверьте следующее:
* Убедитесь, что вы вошли в Кортану, используя ту же учетную запись Майкрософт, которая использовалась для регистрации бота на портале Bot Framework.
* Проверьте, работает ли бот, щелкнув **Test in Web chat** (Тестирование в веб-чате), чтобы открыть окно **чата** и ввести для него сообщение.
* Проверьте, соответствует ли имя вызова [рекомендациям][InvocationNameGuidelines]. Если ваше имя вызова содержит более трех слов, труднопроизносимо или звучит, как другие слова, Кортана может испытывать трудности, распознавая его.
* Если ваш навык использует модель LUIS, убедитесь, что вы [включили подготовку распознавания речи](~/bot-service-manage-speech-priming.md).

Дополнительные советы по устранению неполадок и сведения о том, как включить отладку навыков на панели мониторинга Кортаны, см. [здесь][Cortana-TestBestPractice]. 


## <a name="next-steps"></a>Дополнительная информация

Протестировав навык Кортаны и убедившись, что все работает именно так, как нужно, разверните его для группы тест-инженеров или сделайте его общедоступным. Дополнительные сведения см. в статье [Publishing Cortana Skills][Cortana-Publish] (Публикация навыков Кортаны).

## <a name="additional-resources"></a>Дополнительные ресурсы
* [Cortana Skills Kit][CortanaGetStarted] (Набор навыков Кортаны)

[CortanaGetStarted]: /cortana/getstarted

[BFPortal]: https://dev.botframework.com/
[CortanaDevCenter]: https://developer.microsoft.com/cortana

[CortanaSpecificEntities]: https://aka.ms/cortana-channel-data
[CortanaAuth]: https://aka.ms/add-auth-cortana-skill

[InvocationNameGuidelines]: https://aka.ms/cortana-invocation-guidelines 


[Cortana-Debug]: https://aka.ms/cortana-enable-debug
[Cortana-TestBestPractice]: https://aka.ms/cortana-test-best-practice
[Cortana-Publish]: /cortana/skills/publish-skill
